define("kg/component/6.2.3/extension/align",["util","node","ua"],function(t,e,i){function o(t){var e,i=t.ownerDocument,o=i.body,n=v(t).css("position"),h="fixed"===n||"absolute"===n;if(!h)return"html"===t.nodeName.toLowerCase()?null:t.parentNode;for(e=t.parentNode;e&&e!==o;e=e.parentNode)if(n=v(e).css("position"),"static"!==n)return e;return null}function n(t){var e,i,n,h,r={left:0,right:1/0,top:0,bottom:1/0},l=t.ownerDocument,f=v(l).getWindow(),a=l.body,s=l.documentElement;for(e=t;e=o(e);)if((!j.ie||0!==e.clientWidth)&&e!==a&&e!==s&&"visible"!==v(e).css("overflow")){var u=v(e).offset();u.left+=e.clientLeft,u.top+=e.clientTop,r.top=Math.max(r.top,u.top),r.right=Math.min(r.right,u.left+e.clientWidth),r.bottom=Math.min(r.bottom,u.top+e.clientHeight),r.left=Math.max(r.left,u.left)}return i=f.scrollLeft(),n=f.scrollTop(),r.left=Math.max(r.left,i),r.top=Math.max(r.top,n),h={width:f.width(),height:f.height()},r.right=Math.min(r.right,i+h.width),r.bottom=Math.min(r.bottom,n+h.height),r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function h(t,e,i,o){var n,h,r,l;return n={left:t.left,top:t.top},r=d(e,i[0]),l=d(t,i[1]),h=[l.left-r.left,l.top-r.top],{left:n.left-h[0]+ +o[0],top:n.top-h[1]+ +o[1]}}function r(t,e,i){return t.left<i.left||t.left+e.width>i.right}function l(t,e,i){return t.top<i.top||t.top+e.height>i.bottom}function f(t,e,i,o){var n=m.clone(t),h={width:e.width,height:e.height};return o.adjustX&&n.left<i.left&&(n.left=i.left),o.resizeWidth&&n.left>=i.left&&n.left+h.width>i.right&&(h.width-=n.left+h.width-i.right),o.adjustX&&n.left+h.width>i.right&&(n.left=Math.max(i.right-h.width,i.left)),o.adjustY&&n.top<i.top&&(n.top=i.top),o.resizeHeight&&n.top>=i.top&&n.top+h.height>i.bottom&&(h.height-=n.top+h.height-i.bottom),o.adjustY&&n.top+h.height>i.bottom&&(n.top=Math.max(i.bottom-h.height,i.top)),m.mix(n,h)}function a(t,e,i){var o=[];return m.each(t,function(t){o.push(t.replace(e,function(t){return i[t]}))}),o}function s(t,e){return t[e]=-t[e],t}function u(){}function c(t){var e,i,o,n=t[0];if(m.isWindow(n)){var h=v(n).getWindow();e={left:h.scrollLeft(),top:h.scrollTop()},i=h.width(),o=h.height()}else e=t.offset(),i=t.outerWidth(),o=t.outerHeight();return e.width=i,e.height=o,e}function d(t,e){var i,o,n=e.charAt(0),h=e.charAt(1),r=t.width,l=t.height;return i=t.left,o=t.top,"c"===n?o+=l/2:"b"===n&&(o+=l),"c"===h?i+=r/2:"r"===h&&(i+=r),{left:i,top:o}}function g(t){t.target===this&&t.newVal&&w.call(this)}function p(){this.get("visible")&&w.call(this)}function w(){this._onSetAlign(this.get("align"))}var m=t("util"),b=window,v=t("node"),j=t("ua");u.__getOffsetParent=o,u.__getVisibleRectForElement=n,u.ATTRS={align:{valueFn:function(){return{}}}},u.prototype={__bindUI:function(){var t=this;t.on("beforeVisibleChange",g,t),t.$el.getWindow().on("resize",p,t)},_onSetAlign:function(t){t&&t.points&&this.align(t.node,t.points,t.offset,t.overflow)},align:function(t,e,i,o){t=v(t||b),i=i&&[].concat(i)||[0,0],o=o||{};var u=this,d=u.$el,g=0,p=n(d[0]),w=c(d),j=c(t),x=h(w,j,e,i),y=m.merge(w,x);if(p&&(o.adjustX||o.adjustY)){r(x,w,p)&&(g=1,e=a(e,/[lr]/gi,{l:"r",r:"l"}),i=s(i,0)),l(x,w,p)&&(g=1,e=a(e,/[tb]/gi,{t:"b",b:"t"}),i=s(i,1)),g&&(x=h(w,j,e,i),m.mix(y,x));var M={};M.adjustX=o.adjustX&&r(x,w,p),M.adjustY=o.adjustY&&l(x,w,p),(M.adjustX||M.adjustY)&&(y=f(x,w,p,M))}return u.set({x:y.left,y:y.top},{force:1}),y.width!==w.width&&u.set("width",d.width()+y.width-w.width),y.height!==w.height&&u.set("height",d.height()+y.height-w.height),u},center:function(t){var e=this;return e.set("align",{node:t,points:["cc","cc"],offset:[0,0]}),e},__destructor:function(){var t=this;t.$el&&t.$el.getWindow().detach("resize",p,t)}},i.exports=u});define("kg/component/6.2.3/extension/shim",["ua"],function(e,i,t){function n(){}var o=e("ua"),s=6===o.ie,a='<iframe style="position: absolute;border: none;width: '+(s?"expression(this.parentNode.clientWidth)":"100%")+";top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: "+(s?"expression(this.parentNode.clientHeight)":"100%")+';"/>';n.ATTRS={shim:{value:s}},n.prototype.__createDom=function(){this.get("shim")&&this.get("el").prepend(a)},t.exports=n});define("kg/menu/6.1.5/lib/menu/control",["util","kg/container/6.0.4/index","kg/component/6.2.3/extension/delegate-children","node"],function(e,t,i){function n(e){if(e.target.isMenu){var t=this.el,i=e.newVal;t.setAttribute("aria-activedescendant",i&&i.el.id||"")}}var l=e("util"),a=e("kg/container/6.0.4/index"),r=e("kg/component/6.2.3/extension/delegate-children"),h=e("node").KeyCode;i.exports=a.extend([r],{isMenu:1,beforeCreateDom:function(e){e.elAttrs.role="menu"},bindUI:function(){var e=this;e.on("afterHighlightedItemChange",n,e)},_onSetHighlightedItem:function(e,t){var i;e&&t&&(i=t.prevVal)&&i.set("highlighted",!1,{data:{byPassSetHighlightedItem:1}})},_onSetVisible:function(e,t){var i=this;i.callSuper(e,t);var n;!e&&(n=i.get("highlightedItem"))&&n.set("highlighted",!1)},getRootMenu:function(){return this},handleMouseEnterInternal:function(e){var t=this;t.callSuper(e);var i=t.getRootMenu();i!==t&&i._popupAutoHideTimer&&(clearTimeout(i._popupAutoHideTimer),i._popupAutoHideTimer=null)},handleBlurInternal:function(e){var t=this;t.callSuper(e);var i;(i=t.get("highlightedItem"))&&i.set("highlighted",!1)},_getNextEnabledHighlighted:function(e,t){var i=this.get("children"),n=i.length,l=e;do{var a=i[l];if(!a.get("disabled")&&a.get("visible")!==!1)return i[l];l=(l+t+n)%n}while(l!==e)},handleKeyDownInternal:function(e){var t=this,i=t.get("highlightedItem");if(i&&i.handleKeyDownInternal(e))return!0;var n=t.get("children"),a=n.length;if(0!==a){var r,g,o;switch(e.keyCode){case h.ESC:(i=t.get("highlightedItem"))&&i.set("highlighted",!1);break;case h.HOME:o=t._getNextEnabledHighlighted(0,1);break;case h.END:o=t._getNextEnabledHighlighted(a-1,-1);break;case h.UP:i?(r=l.indexOf(i,n),g=(r-1+a)%a):g=a-1,o=t._getNextEnabledHighlighted(g,-1);break;case h.DOWN:i?(r=l.indexOf(i,n),g=(r+1+a)%a):g=0,o=t._getNextEnabledHighlighted(g,1)}return o?(o.set("highlighted",!0,{data:{fromKeyboard:1}}),!0):void 0}},containsElement:function(e){var t=this,i=t.$el;if(!t.get("visible")||!i)return!1;if(i&&(i[0]===e||i.contains(e)))return!0;for(var n=t.get("children"),l=0,a=n.length;a>l;l++){var r=n[l];if(r.containsElement&&r.containsElement(e))return!0}return!1}},{ATTRS:{handleGestureEvents:{value:!0},focusable:{value:!0},allowTextSelection:{value:!1},highlightedItem:{value:null},defaultChildCfg:{valueFn:function(){return{xclass:"menuitem"}}}},xclass:"menu"})});define("kg/component/6.2.3/extension/content-box",["kg/component/6.2.3/extension/content-box/xtpl/view-render"],function(t,n,e){function o(t){var n=t.get("contentEl");t.$contentEl=t.$contentEl=n,t.contentEl=t.contentEl=n&&n[0]}function c(){}var i=t("kg/component/6.2.3/extension/content-box/xtpl/view-render");c.prototype={__createDom:function(){o(this)},__decorateDom:function(){o(this)},getChildrenContainerEl:function(){return this.get("contentEl")},_onSetContent:function(t){var n=this.$contentEl;n.html(t),this.get("allowTextSelection")||n.unselectable()}},c.ATTRS={contentTpl:{value:i},contentEl:{selector:function(){return"."+this.getBaseCssClass("content")}},content:{parse:function(){return this.get("contentEl").html()}}},e.exports=c});define("kg/search-suggest/6.3.1/mods/promise",[],function(e,n,t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function n(){}function i(e,n){return function(){e.apply(n,arguments)}}function r(e){if("object"!=o(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function f(e,n){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(n):(e._handled=!0,void r._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._state?u:c)(n.promise,e._value);var o;try{o=t(e._value)}catch(i){return void c(n.promise,i)}u(n.promise,o)}))}function u(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==("undefined"==typeof n?"undefined":o(n))||"function"==typeof n)){var t=n.then;if(n instanceof r)return e._state=3,e._value=n,void s(e);if("function"==typeof t)return void a(i(t,n),e)}e._state=1,e._value=n,s(e)}catch(f){c(e,f)}}function c(e,n){e._state=2,e._value=n,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)f(e,e._deferreds[n]);e._deferreds=null}function d(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function a(e,n){var t=!1;try{e(function(e){t||(t=!0,u(n,e))},function(e){t||(t=!0,c(n,e))})}catch(o){if(t)return;t=!0,c(n,o)}}var l=setTimeout;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var o=new this.constructor(n);return f(this,new d(e,t,o)),o},r.all=function(e){var n=Array.prototype.slice.call(e);return new r(function(e,t){function i(f,u){try{if(u&&("object"==("undefined"==typeof u?"undefined":o(u))||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(e){i(f,e)},t)}n[f]=u,0===--r&&e(n)}catch(s){t(s)}}if(0===n.length)return e([]);for(var r=n.length,f=0;f<n.length;f++)i(f,n[f])})},r.resolve=function(e){return e&&"object"==("undefined"==typeof e?"undefined":o(e))&&e.constructor===r?e:new r(function(n){n(e)})},r.reject=function(e){return new r(function(n,t){t(e)})},r.race=function(e){return new r(function(n,t){for(var o=0,i=e.length;o<i;o++)e[o].then(n,t)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},"undefined"!=typeof t&&t.exports?t.exports=r:e.Promise||(e.Promise=r)}(void 0)});define("kg/search-suggest/6.3.1/mods/cross-storage",[],function(e,t,r){"use strict";!function(e){function o(e,t){t=t||{},this._id=o._generateUUID(),this._promise=t.promise||Promise,this._frameId=t.frameId||"CrossStorageClient-"+this._id,this._origin=o._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=t.timeout||5e3,this._listener=null,this._installListener();var r;t.frameId&&(r=document.getElementById(t.frameId)),r&&this._poll(),r=r||this._createFrame(e),this._hub=r.contentWindow}o.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},o._getOrigin=function(e){var t,r,o;return t=document.createElement("a"),t.href=e,t.host||(t=window.location),r=t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol,o=r+"//"+t.host,o=o.replace(/:80$|:443$/,"")},o._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},o.prototype.onConnect=function(){var e=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,r){var o=setTimeout(function(){r(new Error("CrossStorageClient could not connect"))},e._timeout);e._requests.connect.push(function(e){return clearTimeout(o),e?r(e):void t()})}))},o.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},o.prototype.get=function(){var e=Array.prototype.slice.call(arguments);return this._request("get",{keys:e})},o.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},o.prototype.clear=function(){return this._request("clear")},o.prototype.getKeys=function(){return this._request("getKeys")},o.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},o.prototype._installListener=function(){var e=this;this._listener=function(t){var r,o,n,s;if(!e._closed&&t.data&&"string"==typeof t.data&&(o="null"===t.origin?"file://":t.origin,o===e._origin))if("cross-storage:unavailable"!==t.data){if(-1!==t.data.indexOf("cross-storage:")&&!e._connected){if(e._connected=!0,!e._requests.connect)return;for(r=0;r<e._requests.connect.length;r++)e._requests.connect[r](n);delete e._requests.connect}if("cross-storage:ready"!==t.data){try{s=JSON.parse(t.data)}catch(i){return}s.id&&e._requests[s.id]&&e._requests[s.id](s.error,s.result)}}else{if(e._closed||e.close(),!e._requests.connect)return;for(n=new Error("Closing client. Could not access localStorage in hub."),r=0;r<e._requests.connect.length;r++)e._requests.connect[r](n)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},o.prototype._poll=function(){var e,t,r;e=this,r="file://"===e._origin?"*":e._origin,t=setInterval(function(){return e._connected?clearInterval(t):void(e._hub&&e._hub.postMessage("cross-storage:poll",r))},1e3)},o.prototype._createFrame=function(e){var t,r;t=window.document.createElement("iframe"),t.id=this._frameId;for(r in o.frameStyle)o.frameStyle.hasOwnProperty(r)&&(t.style[r]=o.frameStyle[r]);return window.document.body.appendChild(t),t.src=e,t},o.prototype._request=function(e,t){var r,o;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(o=this,o._count++,r={id:this._id+":"+o._count,method:"cross-storage:"+e,params:t},new this._promise(function(e,t){var n,s,i;n=setTimeout(function(){o._requests[r.id]&&(delete o._requests[r.id],t(new Error("Timeout: could not perform "+r.method)))},o._timeout),o._requests[r.id]=function(s,i){return clearTimeout(n),delete o._requests[r.id],s?t(new Error(s)):void e(i)},Array.prototype.toJSON&&(s=Array.prototype.toJSON,Array.prototype.toJSON=null),i="file://"===o._origin?"*":o._origin,o._hub.postMessage(JSON.stringify(r),i),s&&(Array.prototype.toJSON=s)}))},"undefined"!=typeof r&&r.exports?r.exports=o:"undefined"!=typeof t?t.CrossStorageClient=o:"function"==typeof define&&define.amd?define([],function(){return o}):e.CrossStorageClient=o}(void 0)});