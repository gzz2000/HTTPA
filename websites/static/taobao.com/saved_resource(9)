define("kg/combobox/6.2.7/index",["kg/xtemplate/4.3.0/runtime","attribute","util","io","node","kg/component/6.2.3/control","kg/menu/6.1.5/lib/menu/popupmenu","kg/menu/6.1.5/lib/menu/menuitem"],function(e,t,a){var n,i,s,r,l,u,o,d=e("kg/xtemplate/4.3.0/runtime"),v=e("attribute"),g=e("util"),h=e("io"),f=e("node"),p=e("kg/component/6.2.3/control"),m=e("kg/menu/6.1.5/lib/menu/popupmenu"),C=e("kg/menu/6.1.5/lib/menu/menuitem");n=function(e){var t=d;return e=function(){var e=new t(function a(e){function t(e,t,n){e.data,e.affix;t.data+='\n<div class="',d.line=6;var i;i=p(a,e,{params:["trigger"]},t,["getBaseCssClasses"]);var s=i;t=t.writeEscaped(s),t.data+='">\n    <div class="',d.line=7;var r;r=p(a,e,{params:["trigger-inner"]},t,["getBaseCssClasses"]);var l=r;return t=t.writeEscaped(l),t.data+='">&#x25BC;</div>\n</div>\n',t}function n(e,t,a){e.data,e.affix;return t.data+="\n    disabled\n    ",t}function i(e,t,a){e.data,e.affix;return t.data+="none",t}function s(e,t,a){e.data,e.affix;return t.data+="block",t}function r(e,t,a){e.data,e.affix;return t.data+='\n         style="display:none"\n         ',t}var l,a=this,u=a.root,o=a.buffer,c=a.scope,d=(a.runtime,a.name,a.pos),v=c.data,g=c.affix,h=u.nativeCommands,f=u.utils,p=f.callFn,m=(f.callDataFn,f.callCommand,h.range,h["void"],h.foreach,h.forin,h.each,h["with"],h["if"]);h.set,h.include,h.parse,h.extend,h.block,h.macro,h["debugger"];o.data+='<div class="';var C;C=p(a,c,{params:["invalid-el"]},o,["getBaseCssClasses"]);var b=C;o=o.writeEscaped(b),o.data+='">\n    <div class="',d.line=2;var w;w=p(a,c,{params:["invalid-inner"]},o,["getBaseCssClasses"]);var x=w;o=o.writeEscaped(x),o.data+='"></div>\n</div>\n\n',d.line=5,d.line=5;var E=(l=g.hasTrigger)!==e?l:(l=v.hasTrigger)!==e?l:c.resolveLooseUp(["hasTrigger"]);o=m.call(a,c,{params:[E],fn:t},o),o.data+='\n\n<div class="',d.line=11;var y;y=p(a,c,{params:["input-wrap"]},o,["getBaseCssClasses"]);var I=y;o=o.writeEscaped(I),o.data+='">\n\n    <input id="ks-combobox-input-',d.line=13;var D=(l=g.id)!==e?l:(l=v.id)!==e?l:c.resolveLooseUp(["id"]);o=o.writeEscaped(D),o.data+='"\n           aria-haspopup="true"\n           aria-autocomplete="list"\n           aria-haspopup="true"\n           role="autocomplete"\n           aria-expanded="false"\n\n    ',d.line=20;var B=(l=g.disabled)!==e?l:(l=v.disabled)!==e?l:c.resolveLooseUp(["disabled"]);o=m.call(a,c,{params:[B],fn:n},o),o.data+='\n\n    autocomplete="off"\n    class="',d.line=25;var T;T=p(a,c,{params:["input"]},o,["getBaseCssClasses"]);var V=T;o=o.writeEscaped(V),o.data+='"\n\n    value="',d.line=27;var k=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=o.writeEscaped(k),o.data+='"\n    />\n\n\n    <label for="ks-combobox-input-',d.line=31;var S=(l=g.id)!==e?l:(l=v.id)!==e?l:c.resolveLooseUp(["id"]);o=o.writeEscaped(S),o.data+="\"\n            style='display:",d.line=32;var U=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=m.call(a,c,{params:[U],fn:i,inverse:s},o),o.data+=";'\n    class=\"",d.line=33;var R;R=p(a,c,{params:["placeholder"]},o,["getBaseCssClasses"]);var W=R;o=o.writeEscaped(W),o.data+='">\n    ',d.line=34;var _=(l=g.placeholder)!==e?l:(l=v.placeholder)!==e?l:c.resolveLooseUp(["placeholder"]);o=o.writeEscaped(_),o.data+='\n    </label>\n\n    <div class="',d.line=37;var L;L=p(a,c,{params:["clear"]},o,["getBaseCssClasses"]);var O=L;o=o.writeEscaped(O),o.data+='"\n         unselectable="on"\n         ',d.line=39;var F=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=m.call(a,c,{params:[!F],fn:r},o),o.data+='\n         onmousedown="return false;"><div\n            class="',d.line=43;var N;N=p(a,c,{params:["clear-inner"]},o,["getBaseCssClasses"]);var q=N;return o=o.writeEscaped(q),o.data+='">clear</div></div>\n</div>\n',o});return e.render.apply(e,arguments)}}(),i=function(e){function t(e,t){var a=[],i=0;return e?(n.each(t,function(t){-1!==t.indexOf(e)&&a.push(t),i++}),a):t}var a=v,n=g;return e=a.extend({fetchData:function(e,t,a){var n=this.get("parse"),i=this.get("data");i=n(e,i),t.call(a,i)}},{ATTRS:{data:{value:[]},parse:{value:t}}})}(),s=function(e){var t=h,a=v;return e=a.extend({fetchData:function(e,a,n){var i,s=this,r=s.get("paramName"),l=s.get("parse"),u=s.get("cache"),o=s.get("allowEmpty");if(s.caches=s.caches||{},s.io&&(s.io.abort(),s.io=null),!e&&o!==!0)return a.call(n,[]);if(u&&(i=s.caches[e]))return a.call(n,i);var c=s.get("xhrCfg");c.data=c.data||{},c.data[r]=e,c.success=function(t){l&&(t=l(e,t)),s.setInternal("data",t),u&&(s.caches[e]=t),a.call(n,t)},s.io=t(c)}},{ATTRS:{paramName:{value:"q"},allowEmpty:{},cache:{},parse:{},xhrCfg:{valueFn:function(){return{}}}}})}(),r=function(e){return e=n}(),l=function(e){function t(e){for(var t=0;t<e.length;t++)if(!e[t].get("disabled"))return e[t];return null}function a(){v(this)}function n(){var e=this;setTimeout(function(){h(e)},0)}function i(){var e=this;e.focus(),h(e)}function s(){var e=this;e.setCurrentValue(e.getCurrentValue(),{force:1})}function l(e){var t,r=this,l=r.get("menu");if(!e||l===e.target){var o=r.get("input"),c=l.get("el");t=l.get("contentEl"),o.attr("aria-owns",c.attr("id")),c.on("focusout",a,r),c.on("focusin",n,r),t.on("mouseover",i,r),t.on("mousedown",s,r),r.get("matchElWidth")&&c.getWindow().on("resize",u,r)}}function u(){var e=this,t=e.get("menu");if(t.get("visible")){var a=e.get("el"),n=t.get("el"),i=(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("borderRightWidth"),10)||0);t.set("width",a[0].offsetWidth-i)}}function o(e){var t,a=e.target,n=this;a.isMenuItem&&(t=a.get("textContent"),n.setCurrentValue(t),n._savedValue=t,n.set("collapsed",!0))}function d(e,t){var a=e.$el,n=e.getBaseCssClasses("invalid"),i=e.get("invalidEl");t?(a.addClass(n),i.attr("title",t),i.show()):(a.removeClass(n),i.hide())}function v(e){e._focusoutDismissTimer||(e._focusoutDismissTimer=setTimeout(function(){e._focusoutDismissTimer&&e.set("collapsed",!0)},50))}function h(e){var t=e._focusoutDismissTimer;t&&(clearTimeout(t),e._focusoutDismissTimer=null)}function b(e){this.set("value",e.target.value,{data:{causedByInputEvent:1}})}function w(e){var t,a,n,i=this,s=[],r=i.get("menu");if(e=i.normalizeData(e),r.set("highlightedItem",null),r.removeChildren(!0),e&&e.length){if(r.addChildren(e),s=r.get("children"),t=i.getCurrentValue(),i.get("highlightMatchItem"))for(n=0;n<s.length;n++)if(s[n].get("textContent")===t){s[n].set("highlighted",!0),r.set("highlightedItem",s[n]),a=!0;break}if(!a&&i.get("autoHighlightFirst"))for(n=0;n<s.length;n++)if(!s[n].get("disabled")){s[n].set("highlighted",!0),r.set("highlightedItem",s[n]);break}i.set("collapsed",!1),i.fire("afterRenderData")}else i.set("collapsed",!0)}var x=g,E=f,y=p,I=r,D=m,B=C,T=y.Manager;T.setConstructorByXClass("popupmenu",D),T.setConstructorByXClass("menuitem",B);var V,k=E.KeyCode;return V=y.extend({initializer:function(){this.publish("afterRenderData",{bubbles:!1})},_savedValue:null,bindUI:function(){var e=this,t=e.get("input");t.on("input",b,e),e.on("click",o,e);var a=e.get("menu");a.get("rendered")?l.call(e):a.on("afterRenderUI",l,e)},destructor:function(){var e=this;e.get("menu").destroy(),e.$el.getWindow().detach("resize",u,e)},normalizeData:function(e){var t,a,n,i=this;if(e&&e.length){for(e=e.slice(0,i.get("maxItemCount")),t=i.get("format")?i.get("format").call(i,i.getCurrentValue(),e):[],n=0;n<e.length;n++)a=e[n],c=t[n]=x.mix({content:a,textContent:a,value:a},t[n]);return t}return t},getCurrentValue:function(){return this.get("value")},setCurrentValue:function(e,t){this.set("value",e,t)},_onSetValue:function(e,t){var a,n=this,i=n.get("clearEl");if(t.causedByInputEvent){if(a=n.getCurrentValue(),void 0===a)return void n.set("collapsed",!0);n._savedValue=a,n.sendRequest(a)}else n.get("input").val(e);e&&i?i.show():!e&&i&&i.hide();var s=n.get("placeholderEl");s&&(e?s.hide():s.show())},handleFocusInternal:function(){var e=this;h(e),e.get("invalidEl")&&d(e,!1)},handleBlurInternal:function(e){var t=this;t.callSuper(e),v(t),t.get("invalidEl")&&t.validate(function(e,a){e?t.get("focused")||a!==t.get("value")||d(t,e):d(t,!1)})},handleMouseDownInternal:function(e){var t,a,n,i=this;i.callSuper(e),t=e.target,n=i.get("trigger"),a=i.get("clearEl"),n&&(n[0]===t||n.contains(t))?(i.get("collapsed")?(i.focus(),i.sendRequest("")):i.set("collapsed",!0),e.preventDefault()):a&&(a[0]===t||a.contains(t))&&(i.get("input").val(""),i.setCurrentValue("",{data:{causedByInputEvent:1}}),a.hide())},handleKeyDownInternal:function(e){var a,n,i,s=this,r=e.keyCode,l=s.get("menu");if(input=s.get("input"),a=s.get("updateInputOnDownUp"),l.get("visible")){if(n=l.get("highlightedItem"),a&&n){var u=l.get("children");if(r===k.DOWN&&n===t(u.concat().reverse())||r===k.UP&&n===t(u))return s.setCurrentValue(s._savedValue),n.set("highlighted",!1),!0}return i=l.handleKeyDownInternal(e),n=l.get("highlightedItem"),r===k.ESC?(s.set("collapsed",!0),a&&s.setCurrentValue(s._savedValue),!0):(a&&x.inArray(r,[k.DOWN,k.UP])&&s.setCurrentValue(n.get("textContent")),r===k.TAB&&n&&(n.handleClickInternal(e),s.get("multiple"))?!0:i)}if(r===k.DOWN||r===k.UP){var o=s.getCurrentValue();if(void 0!==o)return s.sendRequest(o),!0}},validate:function(e){var t=this,a=t.get("validator"),n=t.getCurrentValue();a?a(n,function(t){e(t,n)}):e(!1,n)},sendRequest:function(e){var t=this,a=t.get("dataSource");a.fetchData(e,w,t)},getKeyEventTarget:function(){return this.get("input")},_onSetCollapsed:function(e){var t=this,a=t.$el,n=t.get("menu");if(e)n.hide();else if(h(t),!n.get("visible")){if(t.get("matchElWidth")){n.render();var i=n.get("el"),s=(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("borderRightWidth"),10)||0);n.set("width",a[0].offsetWidth-s)}n.show()}this.get("input").attr("aria-expanded",!e)},_onSetDisabled:function(e,t){this.callSuper(e,t),this.get("input").attr("disabled",e)}},{ATTRS:{handleGestureEvents:{value:!0},focusable:{value:!0},allowTextSelection:{value:!0},contentTpl:{value:I},input:{selector:function(){return"."+this.getBaseCssClass("input")}},value:{value:"",sync:0,render:1,parse:function(){return this.get("input").val()}},trigger:{selector:function(){return"."+this.getBaseCssClass("trigger")}},placeholder:{render:1,sync:0,parse:function(){var e=this.get("placeholderEl");return e&&e.html()}},placeholderEl:{selector:function(){return"."+this.getBaseCssClass("placeholder")}},clearEl:{selector:function(){return"."+this.getBaseCssClass("clear")}},validator:{},invalidEl:{selector:function(){return"."+this.getBaseCssClass("invalid-el")}},hasTrigger:{value:!0,sync:0,render:1},menu:{getter:function(e){return e=e||{},e.isControl||(e.xclass=e.xclass||"popupmenu",e=this.createComponent(e),this.setInternal("menu",e)),e},setter:function(e){if(e.isControl){e.setInternal("parent",this);var t={node:this.$el,points:["bl","tl"],overflow:{adjustX:1,adjustY:1}};x.mix(e.get("align"),t,!1)}}},collapsed:{render:1,sync:0,value:!0},dataSource:{},maxItemCount:{value:99999},matchElWidth:{value:!0},format:{},updateInputOnDownUp:{value:!0},autoHighlightFirst:{},highlightMatchItem:{value:!0}},xclass:"combobox"}),e=V,V.version="@VERSION@",e}(),u=function(e){var t=l,a=i,n=s;return t.LocalDataSource=a,t.RemoteDataSource=n,e=t}(),o=function(e){return e=u}(),a.exports=o});define("kg/search-suggest/6.3.1/mods/local-query",["base","json","util","kg/search-suggest/6.3.1/mods/storage"],function(t,e,n){function a(t){a.superclass.constructor.call(this,t||{}),this.initialize()}var i=t("base"),s=(t("json"),t("util")),r=t("kg/search-suggest/6.3.1/mods/storage"),o=7,u=100,c="suggest_history_";s.extend(a,i,{initialize:function(){var t=this,e=t.get("name"),n=t.get("tab"),a=t.get("user");"item"===n&&(n="baobei"),t.storageKey=c+e+n+a,t._initStorage(),t.loadHistory()},_setKey:function(t){var e=this,n=t.name||e.get("name"),a=t.tab||e.get("tab"),i=t.user||e.get("user");"item"===a&&(a="baobei"),e.storageKey=c+n+a+i,e.set("tab",a),e.set("name",n),e.set("user",i)},_initStorage:function(){var t=this.get("storageType");switch(t){case"flashStorage":KISSY.log("`storageType=flashStorage`, flash \u5df2\u4e0b\u7ebf\uff0c\u4f7f\u7528 iframe localStorage \u652f\u6301"),this.storage=this._initFlashStorage();break;default:this.storage=this._initIframeStraoge()}},_initFlashStorage:function(){return this._initIframeStraoge()},_initIframeStraoge:function(){var t=this;return{save:function(){return(new r).writeAsync(t.storageKey,t.getDataList())},read:function(){return(new r).readAsync(t.storageKey)},onReady:function(){return(new r).onReady()}}},checkFlash:function(t){this.storage.onReady().then(t&&t.onSuccess,t&&t.onFailure)},loadHistory:function(){var t=this;return this.storage.read().then(function(e){t.setDataList(e),t.translateCn2Pinyin(e)})},translateCn2Pinyin:function(t){t=t||[];for(var e=[],n=0,a=t.length;n<a;n++){var i=t[n],r=/[\u4e00-\u9fa5]/,o=decodeURIComponent(i.value);r.test(o)&&e.push(o)}var u=",,,";if(e.length){this.__cnList=e,this.__cnSep=u,KISSY.suggestHistoryJSONP=s.bind(this._mergeCnPinyin,this);var c=location.protocol+"//suggest.taobao.com/sug?code=utf-8&area=py&callback=KISSY.suggestHistoryJSONP&q="+e.join(u);KISSY.getScript(c)}},_mergeCnPinyin:function(t){var e=this;if(t&&t.result){var n=t.result[0]||"",a=n.split(this.__cnSep);if(this.__cnList&&a.length===this.__cnList.length){var i={};s.each(this.__cnList,function(t,n){i[e.__cnList[n]]=a[n]});for(var r=this.getDataList(),o=0,u=r.length;o<u;o++){var c=r[o],h=decodeURIComponent(c.value);i[h]&&(c.value=i[h])}this.setDataList(r)}}},purge:function(t){for(var e=[],n=s.now()-24*o*3600*1e3,a=0,i=t.length;a<i;a++){var r=t[a];r.time>n&&e.push(r)}return e.sort(function(t,e){return e.time-t.time}),e.length>u&&(e.length=u),e=this._distinctByValue(e)},getDataList:function(){var t=this._datalist||[];return t.concat()},setDataList:function(t){t=this.purge(t||[]),this._datalist=t.concat()},addTobeSavedList:function(t,e){if(!t.match(/<>'"/)&&!e.match(/<>'"/)){var n=this.getDataList(),a={key:encodeURIComponent(t),value:encodeURIComponent(e),time:s.now()};n.unshift(a),this.setDataList(n)}},_distinctByValue:function(t){for(var e,n=[],a=0,i=t.length;a<i;a++)e=t[a],e.value.match(/%3C|%3E|[<>'"]/g)||this._hasItemOfValue(n,e.value)||n.push(e);return n},_hasItemOfValue:function(t,e){for(var n=!1,a=t.length-1;a>=0;a--)t[a].value===e&&(n=!0);return n},save:function(t,e){""!==e&&(this.addTobeSavedList(t,e),this.storage.save())},query:function(t){var e=this.getDataList();if(t){t=encodeURIComponent(t);var n,a,i=[];return s.each(e,function(e){n=e.key,a=e.value,0!==n.indexOf(t)&&0!==a.indexOf(t)||i.push(e)}),i}return e},deleteItem:function(t){for(var e=this.getDataList(),n=encodeURIComponent(t),a=[],i=0,s=e.length;i<s;i++){var r=e[i];r.key!=n&&a.push(r)}this.setDataList(a),this.storage.save()},destructor:function(){this._datalist=null,c=null},clearByDay:function(){},hasHistory:function(){},_query:function(t){},_deleteItemByValue:function(t,e){}},{ATTRS:{name:{value:"default",setter:function(t){return t}},user:{value:"",setter:function(t){return s.fromUnicode(t)}},maxLength:{value:500},storageType:{value:"flashStorage",setter:function(t){return t},getter:function(t){return t}}}}),n.exports=a});define("kg/search-suggest/6.3.1/mods/menu",["node","util"],function(e,t,n){function r(e){var t=this;t.opts=i.mix(r.defs,e),t.$wrap=u(t.opts.wrap),t.$menu=u(t.opts.menu),t.locs=[],t.rNow=null,t.tOut=null,t.init()}var o=e("node"),i=e("util"),u=o.all;r.defs={wrap:"",menu:"",rows:"",dealy:300,handler:null,tolerance:0},r.prototype.getOffset=function(){var e=this,t=e.opts,n=e.$menu,r=n.offset();e.menuOffset=r,e.upperRight={x:r.left+n.outerWidth(),y:r.top-t.tolerance},e.lowerRight={x:r.left+n.outerWidth(),y:r.top+n.outerHeight()+t.tolerance}},r.prototype.bindEvent=function(){var e,t,n,r=this,o=r.opts,i=r.locs,l=r.rNow,a=r.tOut,s=null,f=function(a){function f(e,t){return(t.y-e.y)/(t.x-e.x)}var c=!!u(a).one(o.cls);r.getOffset(),e=r.menuOffset,t=r.upperRight,n=r.lowerRight;var p=i[i.length-1],y=i[0];if(!l||!p)return 0;if(y.x<e.left||y.x>n.x||y.y<e.top||y.y>n.y)return 0;if(s&&p.x===s.x&&p.y===s.y)return 0;var g=f(p,t),h=f(p,n),d=f(y,t),m=f(y,n);return c&&g<d&&h>m?(s=p,o.dealy):(s=null,0)},c=function(e){l!==e&&(o.handler.enterHandler(e),l=e)},p=function m(e,t){t?r.isDelay=!0:r.isDelay=!1;var n=f(t);n?a=setTimeout(function(){m(r.currentTarget,r.currentTarget)},n):(r.isDelay=!1,c(e))},y=function(e){i.push({x:e.pageX,y:e.pageY}),i.length>3&&i.shift()},g=function(){l=null,o.handler.leaveHandler()},h=function(){r.isDelay=!1,l=null,a&&clearTimeout(a)},d=function(e){if(r.currentTarget=e.currentTarget,!r.isDelay){a&&clearTimeout(a);var t=e.relatedTarget,n=u(t).parent(o.rows);p(e.currentTarget,n)}};r.$wrap.on("mousemove",y).on("mouseleave",g),r.$menu.on("mouseleave",h).delegate("mouseenter",o.rows,d)},r.prototype.init=function(){this.getOffset(),this.bindEvent()},n.exports=r});define("kg/search-suggest/6.3.1/tpl/cloud",[],function(a,t,l){l.exports={navi:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-navi-list" '+a.autoAttr+'> <div class="inner-wrap"> <a class="cloud-img-wrap" href="//'+a.data.url+"?source=suggest&suggest=navi_"+a.index+'_1" target="_self"> <img src="//img.alicdn.com/tps/i1/'+a.data.logo+'_70x70.jpg" /> </a> <p>'+a.data.title+'</p> <a class="cloud-btn-wrap" href="//'+a.data.url+"?source=suggest&suggest=navi_"+a.index+'_1" target="_self"> <span class="cloud-link">'+a.data.button+"</span><i>></i> </a> </div></div>";return t},qrcode:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-qrcode" '+a.autoAttr+' > <div class="inner-wrap"> <a href="'+a.data.url+'"><img src="'+a.data.image+'"/></a> </div></div>';return t},spu:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-spu-list" '+a.autoAttr+' > <div class="inner-wrap"> <ul> ',l=a.data;if(l)for(var s,i=-1,e=l.length-1;i<e;)s=l[i+=1],t+=' <li> <a class="cloud-img-wrap cloud-link" href="//'+s.url+"&source=suggest&suggest=spu_"+a.index+"_"+(~~i+1)+'" target="_self"> <img src="//img.alicdn.com/tps/i1/'+s.pic+'_50x50.jpg" /> </a> <a class="cloud-title" title="'+s.title+'" href="//'+s.url+"&source=suggest&suggest=spu_"+a.index+"_"+(~~i+1)+'" target="_self"> <span>'+s.title+'</span> </a> <p class="cloud-price '+(0===~~s.price?"cloud-hidden":"")+'">\u53c2\u8003\u4ef7:<b class="">\uffe5'+s.price+'</b><b class="noprice">\u6682\u65e0</b></p> </li> ';return t+=' </ul> <p class="cloud-total '+a.ishidden+'"> <span class="total">\u5171'+a.count+'\u6b3e\u4ea7\u54c1</span> <a class="more" target="_self" href="//'+a.link+"&source=suggest&suggest=spu_"+a.index+'_more">\u67e5\u770b\u5168\u90e8>></a> </p> </div></div>'},tag:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="true" class="J_cloud-handle cloud-list" '+a.autoAttr+' > <div class="inner-wrap"><h3>'+a.tagTitle+"</h3> <ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;i<e;)s=l[i+=1],t+=' <li><a target="_self" href="'+a.action+"?q="+a.tagTitle+" "+s+"&wq="+a.query+"&source=suggest&suggest=magic_"+a.index+"_"+(~~i+1)+"&tag="+s+a.param+'" class="cloud-link"><span>'+s+"</span></a></li> ";return t+=" </ul> </div></div>"},tag_group:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="true" class="J_cloud-handle cloud-list type-taggroup" '+a.autoAttr+' > <div class="inner-wrap"><h3>'+a.tagTitle+"</h3> <ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;i<e;){s=l[i+=1],t+=' <li  class="tag-group"> <ul> ';var r=s;if(r)for(var u,d=-1,n=r.length-1;d<n;)u=r[d+=1],t+=' <li> <a target="_self" href="'+a.action+"?q="+encodeURIComponent(a.tagTitle+" "+u.title)+"&wq="+a.query+"&source=suggest&suggest=magic_"+a.index+"_"+(~~d+1)+"&tag="+u.title+a.param+'" class="cloud-link '+u.type+'"><span>'+u.title+"</span></a> </li> ";t+=" </ul> </li> "}return t+=" </ul> </div></div>"},topbrand:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-topbrand-list" '+a.autoAttr+' > <div class="inner-wrap"> <h3>\u201c'+a.tagTitle.substr(0,11)+"\u201d\u70ed\u95e8\u54c1\u724c</h3><ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;i<e;)s=l[i+=1],t+=' <li> <a class="cloud-title cloud-link" href="//'+s.url+"&source=suggest&suggest=brandlist_"+a.index+"_"+(~~i+1)+'" target="_self"> <span><i class="cloud-top'+i+'">'+(~~i+1)+"</i>"+s.title+"</span> </a> </li> ";return t+=" </ul> </div></div>"}}});define("kg/search-suggest/6.3.1/mods/bts",["base","kg/search-suggest/6.3.1/mods/utils","util"],function(t,e,s){function u(t){u.superclass.constructor.call(this,t||{})}var i=t("base"),n=t("kg/search-suggest/6.3.1/mods/utils"),r=t("util");r.extend(u,i,{getBucket:function(){var t=this,e=t.getCookieT(),s=t.getTestBucket()||t.retBucket(e,20,-4,4)-0;return s},getTestBucket:function(){var t=location.search,e=t.match(/alg_bts=(\d+)/);if(e&&e[1])return e[1]-0},getCookieT:function(){var t=new n,e=t.getCookie("t");return e},retBucket:function(t,e,s,u){return t?this.countBucket(t,e,s,u):"0"},countBucket:function(t,e,s,u){var i=t.substr(s,u),n=parseInt(i,16),r=n%e+1;return r+""}},{ATTRS:{pluginId:{value:"bts"}}}),s.exports=u});define("kg/uploader/6.2.13/index",["base","util","kg/uploader/6.2.13/logger.js","json","node","io","ua","kg/flash/6.0.8/index","event"],function(e,t,a){var r,i,n,s,u,l,o,d,f,c,p,g=e("base"),v=e("util"),h=e("kg/uploader/6.2.13/logger.js"),m=e("json"),S=e("node"),_=e("io"),R=e("ua"),E=e("kg/flash/6.0.8/index"),b=e("event");r=function(e){return e=KISSY||{log:function(){},error:function(){}}}(),i=function(e){var t=g,a=v,r=h,i=m,n="",s=t.extend({upload:function(){},stop:function(){},_processResponse:function(e){var t=this,s=t.get("filter"),u={};if(a.isString(e))try{u=i.parse(e),s!=n&&(u=s.call(t,e)),u=t._fromUnicode(u)}catch(l){var o=e+"\uff0c\u8fd4\u56de\u7ed3\u679c\u96c6responseText\u683c\u5f0f\u4e0d\u5408\u6cd5\uff01";r.log(o),t.fire("error",{status:-1,result:{msg:o}})}else a.isObject(e)&&(u=e,s!=n&&(u=s.call(t,e)),u=t._fromUnicode(u));return r.log("\u670d\u52a1\u5668\u7aef\u8f93\u51fa\uff1a"+i.stringify(u)),u},_fromUnicode:function(e){function t(e){a.each(e,function(r,i){a.isObject(e[i])?t(e[i]):e[i]=a.isString(r)&&a.fromUnicode(r)||r})}return a.isObject(e)?(t(e),e):e}},{ATTRS:{action:{value:n},data:{value:{}},filter:{value:n}}});return a.mix(s,{event:{START:"start",STOP:"stop",SUCCESS:"success",ERROR:"error"}}),e=s}(),n=function(e){var t=S,a=i,r=_,n=v,s=h,u="",l=t.all,o="[uploader-AjaxType]:",d=a.extend({upload:function(e){var t=this;if(!e)return s.log(o+"upload()\uff0cfileData\u53c2\u6570\u6709\u8bef\uff01"),t;var a=t.get("blobSize");return a>0?t._chunkedUpload(e):t._fullUpload(e),t},stop:function(){var e=this,t=e.get("ajax");return n.isObject(t)?(t.abort(),e.fire(d.event.STOP),e):(s.log(o+"stop()\uff0cio\u503c\u9519\u8bef\uff01"),e)},_getFormData:function(e){return l.isArray(e)?e:n.isObject(e)?(e=[],l.each(e,function(t,a){e.push({name:t,value:a})}),e):e},_setWithCredentials:function(){var e=this,t=e.get("ajaxConfig");return n.mix(t,{xhrFields:{withCredentials:!0}}),t},_setFormData:function(){var e=this;try{e.set("formData",new FormData),e._processData()}catch(t){s.log(o+"something error when reset FormData.")}},_resetFormData:function(){var e=this;e.set("formData",new FormData)},_processData:function(){var e=this,t=e.get("data"),a=e.get("formData");n.each(t,function(e,t){a.append(t,e)}),e.set("formData",a)},_addFileData:function(e){if(!n.isObject(e))return s.log(o+"_addFileData()\uff0cfile\u53c2\u6570\u6709\u8bef\uff01"),!1;var t=this,a=t.get("formData"),r=t.get("fileDataName"),i=e.name;return a.append(r,e,i),t.set("formData",a),a},_chunkedUpload:function(e){function t(){var s=f.call(e,l,l+o,e.type),c=s.size;a._setContentDisposition(e.name),a._setContentRange(l,c,u),a._setFormData(),a._addFileData(s),n.mix(i,{data:a.get("formData")});var p=r(i);p.then(function(e){var r=e[0];l=a._getUploadedBytes(p)||l+c,a.fire(d.event.PROGRESS,{loaded:l,total:u}),u>l?t():a.fire(d.event.SUCCESS,{result:r})},function(t){a._errorHandler(t,e)})}if(!n.isObject(e))return!1;var a=this,i=a.get("ajaxConfig"),s=a.get("action");n.mix(i,{url:s});var u=e.size,l=0,o=a.get("blobSize")||u,f=e.slice||e.webkitSlice||e.mozSlice;t()},_fullUpload:function(e){var t=this,a=t.get("ajaxConfig");t._setFormData(),t._addFileData(e),n.mix(a,{data:t.get("formData"),url:t.get("action")});var i=r(a);return i.then(function(e){var a=e[0];a=t._processResponse(a),t.fire(d.event.SUCCESS,{result:a})},function(a){t._errorHandler(a,e)}),t.set("ajax",i),i},_errorHandler:function(e,t){var a=this,r={},i=e[1];"timeout"==i&&(r.msg="\u8bf7\u6c42\u8d85\u65f6\uff01",r.status="timeout"),a.fire(d.event.ERROR,{status:i,result:r,file:t})},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),a=t&&t.split("-"),r=a&&a.length>1&&parseInt(a[1],10);return r&&r+1},_setContentRange:function(e,t,a){var r="bytes "+e+"-"+(e+t-1)+"/"+a,i=this,n=i.get("ajaxConfig"),s=n.headers;return s["Content-Range"]=r,r},_setContentDisposition:function(e){return this._setRequestHeader("Content-Disposition",'attachment; filename="'+encodeURI(e)+'"')},_setRequestHeader:function(e,t){var a=this,r=a.get("ajaxConfig");return r.headers[e]=t,a.set("ajaxConfig",r),t}},{ATTRS:{formData:{value:u},ajaxConfig:{value:{type:"post",processData:!1,cache:!1,dataType:"json",contentType:!1,timeout:600,headers:{}}},ajax:{value:u},fileDataName:{value:u},form:{value:{}},fileInput:{value:u},blobSize:{value:0},CORS:{value:!1},isUsePostMessage:{value:!1},timeout:{value:600,setter:function(e){var t=this,a=t.get("ajaxConfig");return a.timeout=e,e}}}});return n.mix(d,{event:n.merge(a.event,{PROGRESS:"progress"})}),e=d}(),s=function(e){function t(e){var a=this;t.superclass.constructor.call(a,e),a.isHasCrossdomain(),a._init()}var a=i,r="",n="[uploader-FlashType]:",s=v,u=h,l=_;return s.mix(t,{event:s.merge(a.event,{SWF_READY:"swfReady",PROGRESS:"progress"})}),s.extend(t,a,{_init:function(){var e=this,a=e.get("swfUploader");return a?(a.on("contentReady",function(){e.fire(t.event.SWF_READY)},e),a.on("uploadStart",e._uploadStartHandler,e),a.on("uploadProgress",e._uploadProgressHandler,e),a.on("uploadCompleteData",e._uploadCompleteDataHandler,e),void a.on("uploadError",e._uploadErrorHandler,e)):(u.log(n+"swfUploader\u5bf9\u8c61\u4e3a\u7a7a\uff01"),!1)},upload:function(e){var t=this,a=t.get("swfUploader"),r=t.get("action"),i="POST",n=t.get("data"),u=t.get("fileDataName");return u||(u="Filedata"),t.set("uploadingId",e),s.mix(n,{type:"flash"}),a.upload(e,r,i,n,u),t},stop:function(){var e=this,a=e.get("swfUploader"),i=e.get("uploadingId");return i!=r&&(a.cancel(i),e.fire(t.event.STOP,{id:i})),e},_uploadStartHandler:function(e){var a=this;a.fire(t.event.START,{file:e.file})},_uploadProgressHandler:function(e){var a=this;s.mix(e,{loaded:e.bytesLoaded,total:e.bytesTotal}),u.log(n+"\u5df2\u7ecf\u4e0a\u4f20\u5b57\u8282\u6570\u4e3a\uff1a"+e.bytesLoaded),a.fire(t.event.PROGRESS,{loaded:e.loaded,total:e.total})},_uploadCompleteDataHandler:function(e){var a=this,i=a._processResponse(e.data);a.set("uploadingId",r),a.fire(t.event.SUCCESS,{result:i})},_uploadErrorHandler:function(e){var a=this;a.set("uploadingId",r),a.fire(t.event.ERROR,{msg:e.msg})},isHasCrossdomain:function(){var e=location.hostname;l({url:"//"+e+"/crossdomain.xml",dataType:"xml",error:function(){u.log("\u7f3a\u5c11crossdomain.xml\u6587\u4ef6\u6216\u8be5\u6587\u4ef6\u4e0d\u5408\u6cd5\uff01")}})}},{ATTRS:{action:{value:r,getter:function(e){var t=/^http/;if(!t.test(e)&&!/\/\//.test(e)){var a,r=location.href,i=r.split("/");a=s.filter(i,function(e,t){return t<i.length-1}),e=a.join("/")+"/"+e}return e}},swfUploader:{value:r},uploadingId:{value:r}}}),s.mix(t,{event:s.merge(a.event,{PROGRESS:"progress"})}),e=t}(),u=function(e){var t=S,a=g,r="",i=v,n=R,s=a.extend({constructor:function(e,a){var r=this;a=i.merge({target:t(e)},a),s.superclass.constructor.call(r,a)},render:function(){var e=this,t=e.get("srcFileInput");if(!t||!t.length)return e;var a=t.clone();a.addClass("file-input"),t.remove(),e.set("srcFileInput",a),e._createInput()},show:function(){var e=this,t=e.get("target");return t.show(),e.fire("afterShow"),s},hide:function(){var e=this,t=e.get("target");return t.hide(),e.fire("afterHide"),s},reset:function(){var e=this,a=e.get("inputContainer");return t(a).remove(),e.set("inputContainer",r),e.set("fileInput",r),e._createInput(),e},_createInput:function(){var e=this,a=e.get("target"),r=e.get("tpl");if(!i.isString(r))return!1;var s=e.get("srcFileInput");if(!s.length)return!1;var u=s.clone();e.set("fileInput",u);var l=t(r);return l.append(u),l.appendTo(a),6==n.ie&&u.css("fontSize","400px"),t(u).on("change",e._changeHandler,e),e.set("inputContainer",l),e._setDisabled(e.get("disabled")),e._setMultiple(e.get("multiple")),l},_changeHandler:function(e){var a=this,n=a.get("fileInput"),s=t(n).val(),u=e.target.files,l=[];return s==r?!1:(u?i.each(u,function(e){i.isObject(e)&&l.push({name:e.name,type:e.type,size:e.size,data:e})}):l.push({name:s.replace(/.*(\/|\\)/,"")}),a.fire("change",{files:l,input:n.getDOMNode()}),void a.reset())},_setDisabled:function(e){var a=this,r=a.get("cls"),n=r.disabled,s=a.get("target"),u=a.get("fileInput");return s.length&&i.isBoolean(e)?(e?(s.addClass(n),t(u).hide()):(s.removeClass(n),t(u).show()),e):!1},_setMultiple:function(e){var t=this,a=t.get("fileInput");return a.length?(e&&a.attr("multiple","multiple")||a.removeAttr("multiple"),e):!1}},{ATTRS:{target:{value:null},fileInput:{value:r},srcFileInput:{value:r},inputContainer:{value:r},tpl:{value:"<div class='file-input-wrapper' style='overflow: hidden;'></div>"},name:{value:"fileInput",setter:function(e){return this.get("fileInput")&&t(this.get("fileInput")).attr("name",e),e}},disabled:{value:!1,setter:function(e){return this._setDisabled(e),e}},multiple:{value:!0,setter:function(e){return this._setMultiple(e),e}},cls:{value:{disabled:"uploader-button-disabled"}}}});return e=s}(),l=function(e){function t(e,r,n){e=e.replace(s,""),r=a._normalize(r||{});var u=this,f=s+e,c=function(e){return e.status<1?void u.fire("failed",{data:e}):(i.mix(u,e),void(e.dynamic&&r.src||u.activate()))};r.id=r.id||i.guid(l),t.instances[r.id]=u,r.src&&(r.params.allowscriptaccess="always",r.params.flashvars=i.merge(r.params.flashvars,{jsEntry:d,swfID:r.id})),n?u.__args=[f,r,c]:i.later(a.add,o,!1,a,[f,r,c])}var a=E,r=b,i=v,n=h,s="#",u="1.0.15",l="ks-ajb-",o=100,d="AJBridge.eventHandler";return i.mix(t,{version:u,instances:{},eventHandler:function(e,a){var r=t.instances[e];r&&r.__eventHandler(e,a)},augment:function(e,t){i.isString(t)&&(t=[t]),i.isArray(t)&&i.each(t,function(t){e.prototype[t]=function(){try{return this.callSWF(t,i.makeArray(arguments))}catch(e){this.fire("error",{message:e})}}})}}),i.augment(t,r.Target,{init:function(){this.__args&&(a.add.apply(a,this.__args),this.__args=null,delete this.__args)},__eventHandler:function(e,t){var a=this,r=t.type;switch(t.id=e,r){case"log":n.log(t.message);break;default:a.fire(r,t)}},callSWF:function(e,t){var a=this;t=t||[];try{if(a.swf[e])return a.swf[e].apply(a.swf,t)}catch(r){var i="";return 0!==t.length&&(i="'"+t.join("','")+"'"),new Function("self","return self.swf."+e+"("+i+");")(a)}}}),t.augment(t,["activate","getReady","getCoreVersion"]),window.AJBridge=t,e=t}(),o=function(e){function t(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}var a=g,i="",n="[uploader-queue]:",s=v,u=r,l=a.extend({add:function(e,t){var a=this,r={};if(e.length>0){r=[];var i=a.get("uploader"),n=a.get("files").length,u=i.get("max")>0;s.each(e,function(e,t){if(u){var s=i.get("max");s>=n+t+1&&r.push(a._addFile(e))}else r.push(a._addFile(e))})}else r=a._addFile(e);return t&&t.call(a),r},_addFile:function(e,t){if(!s.isObject(e))return u.log(n+"_addFile()\u53c2\u6570file\u4e0d\u5408\u6cd5\uff01"),!1;var a=this,r=a._setAddFileData(e),i=a.getFileIndex(r.id),o=a.get("fnAdd");return s.isFunction(o)&&(r=o(i,r)),a.fire(l.event.ADD,{index:i,file:r,uploader:a.get("uploader")}),t&&t.call(a,i,r),r},remove:function(e,t){var a,r=this,i=r.get("files");return s.isString(e)&&(e=r.getFileIndex(e)),a=i[e],s.isObject(a)?(i=s.filter(i,function(t,a){return a!==e}),r.set("files",i),r.fire(l.event.REMOVE,{index:e,file:a}),t&&t.call(r,e,a),a):(u.log(n+"remove()\u4e0d\u5b58\u5728index\u4e3a"+e+"\u7684\u6587\u4ef6\u6570\u636e"),!1)},clear:function(){function e(){return t=a.get("files"),t.length?void a.remove(0,function(){e()}):(a.fire(l.event.CLEAR),!1)}var t,a=this;e()},fileStatus:function(e,t,a){if(!s.isNumber(e))return!1;var r,i=this,n=i.getFile(e);return n?(r=n.status,t?r==t?i:(i.updateFile(e,{status:t}),i.fire(l.event.FILE_STATUS,{index:e,status:t,args:a,file:n}),i):r):!1},getFile:function(e){var t,a=this,r=a.get("files");return s.isNumber(e)?t=r[e]:s.each(r,function(a){return a.id==e?(t=a,!0):void 0}),t},getFileIndex:function(e){var t=this,a=t.get("files"),r=-1;return s.each(a,function(t,a){return t.id==e?(r=a,!0):void 0}),r},updateFile:function(e,t){if(!s.isNumber(e))return!1;if(!s.isObject(t))return u.log(n+"updateFile()\u7684data\u53c2\u6570\u6709\u8bef\uff01"),!1;var a=this,r=a.get("files"),i=a.getFile(e);return i?(s.mix(i,t),r[e]=i,a.set("files",r),a.fire(l.event.UPDATE_FILE,{index:e,file:i}),i):!1},getIndexs:function(e){var t,a=this,r=a.get("files"),i=[];return r.length?(s.each(r,function(a,r){s.isObject(a)&&(t=a.status,t==e&&i.push(r))}),i):i},getFiles:function(e){var t=this,a=t.get("files"),r=[];return a.length?(s.each(a,function(t){t&&t.status==e&&r.push(t)}),r):[]},_setAddFileData:function(e){var a=this,r=a.get("files");return s.isObject(e)?(e.id||(e.id=s.guid(l.FILE_ID_PREFIX)),e.size&&(e.textSize=t(e.size)),e.status||(e.status="waiting"),r.push(e),e):(u.log(n+"_updateFileData()\u53c2\u6570file\u4e0d\u5408\u6cd5\uff01"),!1)}},{ATTRS:{fnAdd:{value:i},files:{value:[]},uploader:{value:i}}});return s.mix(l,{event:{ADD:"add",ADD_FILES:"addFiles",REMOVE:"remove",CLEAR:"clear",FILE_STATUS:"statusChange",UPDATE_FILE:"updateFile"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error",RESTORE:"restore"},FILE_ID_PREFIX:"file-"}),e=l}(),d=function(e){var t=S,a=i,r=v,n="",s=t.all,u="[uploader-iframeType]:",l="ks-uploader-iframe-",o=h,d={tpl:{IFRAME:'<iframe src="javascript:false;" name="{id}" id="{id}" border="no" width="1" height="1" style="display: none;" />',FORM:'<form method="post" enctype="multipart/form-data" action="{action}" target="{target}" style="visibility: hidden;">{hiddenInputs}</form>',HIDDEN_INPUT:'<input type="hidden" name="{name}" value="{value}" />'},event:r.mix(a.event,{CREATE:"create",REMOVE:"remove"})},f=a.extend({upload:function(e){var t,a=this,r=s(e);return r.length?(a.fire(d.event.START,{input:r}),a.set("fileInput",r),a._create(),(t=a.get("form"))?void t.getDOMNode().submit():(o.log(u+"form\u8282\u70b9\u4e0d\u5b58\u5728\uff01"),!1)):!1},stop:function(){var e=this,t=e.get("iframe");return t.attr("src",'javascript:"<html></html>";'),e._remove(),e.fire(d.event.STOP),e.fire(d.event.ERROR,{status:"abort",msg:"\u4e0a\u4f20\u5931\u8d25\uff0c\u539f\u56e0\uff1aabort"}),e},dataToHidden:function(e){if(!r.isObject(e)||r.isEmptyObject(e))return"";var t=this,a=n,i=t.get("tpl"),s=i.HIDDEN_INPUT;if(!r.isString(s))return"";for(var u in e)a+=r.substitute(s,{name:u,value:e[u]});return a},_createIframe:function(){var e,t,a=this,i=l+r.guid(),n=a.get("tpl"),d=n.IFRAME,f=a.get("iframe");return r.isEmptyObject(f)?r.isString(d)?r.isString(i)?(e=r.substitute(n.IFRAME,{id:i}),t=s(e),a.get("domain")||t.on("load",a._iframeLoadHandler,a),s("body").append(t),a.set("id",i),a.set("iframe",t),s("body").data("UPLOAD_TYPE",a),t):(o.log(u+"id\u5fc5\u987b\u5b58\u5728\u4e14\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff01"),!1):(o.log(u+"iframe\u7684\u6a21\u677f\u4e0d\u5408\u6cd5\uff01"),!1):f},handleResult:function(e){var t=this;e=t._processResponse(e),t.fire(d.event.SUCCESS,{result:e}),t._remove()},_iframeLoadHandler:function(e){var t=this,a=e.target,r=d.event.ERROR;try{var i=a.contentDocument||window.frames[a.id].document;if(!i||!i.body)return t.fire(r,{msg:"\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u6570\u636e\u6709\u95ee\u9898\uff01"}),!1;var s=i.body.innerHTML;if(s==n)return!1;t.handleResult(s)}catch(u){o.log(u)}},_createForm:function(){var e,t,a,i=this,n=i.get("id"),l=i.get("tpl"),d=l.FORM,f=i.get("data"),c=i.get("action"),p=i.get("fileInput");return r.isString(d)?r.isString(c)?(e=i.dataToHidden(f),e+=i.dataToHidden({type:"iframe"}),a=r.substitute(d,{action:c,target:n,hiddenInputs:e}),t=s(a).append(p),s("body").append(t),i.set("form",t),t):(o.log(u+"action\u53c2\u6570\u4e0d\u5408\u6cd5\uff01"),!1):(o.log(u+"form\u6a21\u677f\u4e0d\u5408\u6cd5\uff01"),!1)},_create:function(){var e=this,t=e._createIframe(),a=e._createForm();e.fire(d.event.CREATE,{iframe:t,form:a})},_remove:function(){var e=this,t=e.get("form");return t?(t.remove(),e.reset("form"),void e.fire(d.event.REMOVE,{form:t})):!1}},{ATTRS:{tpl:{value:d.tpl},id:{value:l+r.guid()},domain:{value:n},iframe:{value:{}},form:{value:n},fileInput:{value:n}}});return r.mix(f,{event:r.merge(a.event,{PROGRESS:"progress"})}),e=f}(),f=function(e){function t(e,a){a=a||{};var i={};r.each(["ds","dsp","btn","hand"],function(e){e in a&&(i[e]=a[e])}),a.params=a.params||{},a.params.flashvars=r.merge(a.params.flashvars,i),t.superclass.constructor.call(this,e,a)}var a=l,r=v;return r.extend(t,a),a.augment(t,["setFileFilters","filter","setAllowMultipleFiles","multifile","browse","upload","uploadAll","cancel","getFile","removeFile","lock","unlock","setBtnMode","useHand","clear"]),t.version="1.0.1",a.Uploader=t,e=a.Uploader}(),c=function(e){var t=S,a=g,r=f,i="",n="swf-uploader-wrapper-",s=v,u=a.extend({constructor:function(e,a){var r=this;a=s.merge({target:t(e)},a),u.superclass.constructor.call(r,a)},render:function(){var e,t=this,a=t.get("target"),r=t.get("multiple"),i=t.get("fileFilters");a.css("position","relative"),t.set("swfWrapper",t._createSwfWrapper()),t._setFlashSizeConfig(),e=t._initSwfUploader(),e.on("contentReady",function(){e.isContent||(e.isContent=!0,e.browse(r,i),t._bindBtnEvent(),e.on("fileSelect",t._changeHandler,t),t._setDisabled(t.get("disabled")),t.fire("render"))},t);var n=t.get("srcFileInput");return n&&n.length&&n.remove(),t},_createSwfWrapper:function(){var e=this,a=e.get("target"),r=e.get("tpl"),u=e.get("swfWrapperId")!=i&&e.get("swfWrapperId")||n+s.guid(),l=s.substitute(r,{id:u});return e.set("swfWrapperId",u),t(l).appendTo(a)},_initSwfUploader:function(){var e,t=this,a=t.get("flash"),i=t.get("swfWrapperId");s.mix(a,{id:"swfUploader"+s.guid()});try{e=new r(i,a),t.set("swfUploader",e)}catch(n){}return e},_bindBtnEvent:function(){var e=this,t=u.event,a=e.get("swfUploader");return a?(s.each(t,function(t){a.on(t,function(){e.fire(t)},e)}),e):!1},_setFlashSizeConfig:function(){var e=this,t=e.get("flash"),a=e.get("size");s.isEmptyObject(a)||s.mix(t.attrs,a),e.set("flash",t)},_changeHandler:function(e){var t=this;if(t.get("swfUploader").id==e.id){var a=e.fileList;t.fire("change",{files:a})}},_setDisabled:function(e){var t=this,a=t.get("swfUploader"),r=t.get("cls"),i=r.disabled,n=t.get("target"),u=t.get("swfWrapper");return a&&s.isBoolean(e)?(e?(n.addClass(i),u.css("top","-3000px")):(n.removeClass(i),u.css("top",0)),e):!1},show:function(){var e=this,t=e.get("target");t.show()},hide:function(){var e=this,t=e.get("target");t.hide()}},{ATTRS:{target:{value:i},swfWrapper:{value:i},swfWrapperId:{value:i},tpl:{value:"<div id='{id}' class='uploader-button-swf' style='position: absolute;top:0;left:0;z-index:2000;'></div>"},multiple:{value:!0,setter:function(e){var t=this,a=t.get("swfUploader");return a&&a.multifile(e),e}},fileFilters:{value:[],setter:function(e){var t=this,a=t.get("swfUploader");return s.isObject(e)&&(e=[e]),a&&s.isArray(e)&&s.later(function(){a.filter(e)},800),e}},disabled:{value:!1,setter:function(e){var t=this,a=t.get("swfUploader");return a&&t._setDisabled(e),e}},cls:{value:{disabled:"uploader-button-disabled"}},size:{value:{}},flash:{value:{src:"//g.alicdn.com/kg/uploader/3.0.5/plugins/ajbridge/uploader.swf",id:"swfUploader",params:{bgcolor:"#fff",wmode:"transparent"},attrs:{width:400,height:400},hand:!0,btn:!0}},swfUploader:{value:i},srcFileInput:{value:i}}});return e=u}(),p=function(e){var t=S,a=g,i=m,l=R,f=v,p=r,h=d,_=n,E=s,b=u,y=c,F=o,x="[uploader]:",I="",T=t.all,C="text/uploader-files",A=a.extend({constructor:function(e,t){var a=this;A.superclass.constructor.call(a,t),a.set("target",e),a._init()},_init:function(){var e=this,t=e.get("target");if(!t.length)return p.log("\u76ee\u6807\u5143\u7d20\u4e0d\u5b58\u5728\uff01"),!1;var a=e.get("type"),r=e.getUploadType(a);return e._replaceBtn(),e._renderButton(),e._renderQueue(),e._renderUploaderCore(r),e},_replaceBtn:function(){var e=this,t=e.get("target");if(!t.length)return!1;var a=t[0].defaultValue||e.get("text"),r=f.substitute(e.get("btnTpl"),{text:a}),i=T(r).insertAfter(t);return!e.get("name")&&t.attr("name")&&e.set("name",t.attr("name")),e.set("_oldInput",t.clone()),e.set("fileInput",t),e.set("target",i),i},upload:function(e){if(!f.isNumber(e))return!1;var t,a=this,r=a.get("uploadType"),i=a.get("type"),n=a.get("queue"),s=n.get("files")[e];return f.isObject(s)?a.get("curUploadIndex")!=I?(alert("\u7b2c"+a.get("curUploadIndex")+"\u6587\u4ef6\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u4e0a\u4f20\u5b8c\u540e\u518d\u64cd\u4f5c\uff01"),!1):(t=s.input,"flash"==i&&(t=s.input.id),"ajax"==i&&(t=s.data),"error"===s.status?!1:a.get("isAllowUpload")?(a.set("curUploadIndex",e),a.fire(A.event.START,{index:e,file:s}),n.fileStatus(e,A.status.START),void r.upload(t)):!1):(p.log(x+"\u961f\u5217\u4e2d\u7d22\u5f15\u503c\u4e3a"+e+"\u7684\u6587\u4ef6"),!1)},cancel:function(e){var t=this,a=t.get("uploadType"),r=t.get("queue"),i=A.status,n=r.fileStatus(e);return f.isNumber(e)&&n!=i.SUCCESS?(a.stop(),r.fileStatus(e,i.CANCEL)):(a.stop(),t._continueUpload()),t},stop:function(){var e=this;return e.set("uploadFilesStatus",I),e.cancel(),e},uploadFiles:function(e){var t=this;return f.isString(e)||(e=A.status.WAITING),t.set("uploadFilesStatus",e),t._uploaderStatusFile(e),t},_uploaderStatusFile:function(e){var t=this,a=t.get("queue"),r=a.getIndexs(e);return r.length?(t.upload(r[0]),t):(t.set("uploadFilesStatus",I),t.fire(A.event.UPLOAD_FILES),!1)},isSupportAjax:function(){var e=!1;try{FormData&&(e=!0)}catch(t){e=!1}return e},isSupportFlash:function(){var e=l.fpv();return f.isArray(e)&&e.length>0},_renderUploaderCore:function(e){var t=this;if(!e)return!1;var a={action:t.get("action"),data:t.get("data"),dataType:"json"},r=t.get("button");t.get("type")==A.type.FLASH&&f.mix(a,{swfUploader:r.get("swfUploader")}),a.fileDataName=t.get("name"),a.CORS=t.get("CORS"),a.filter=t.get("filter");var i=new e(a),n=e.event;return i.on(n.SUCCESS,t._uploadCompleteHandler,t),i.on(n.ERROR,t._uploadCompleteHandler,t),n.PROGRESS&&i.on(n.PROGRESS,t._uploadProgressHandler,t),i.on(n.STOP,t._uploadStopHanlder,t),t.set("uploadType",i),i},getUploadType:function(e){var t,a=this,r=A.type;return e==r.AUTO&&(e=[r.AJAX,r.IFRAME]),f.isArray(e)&&e.length>0?f.each(e,function(e){return t=a._getType(e),t?!1:void 0}):t=a._getType(e),t},_getType:function(e){var t,a=this,r=A.type,i=a.isSupportAjax(),n=a.isSupportFlash();switch(e){case r.IFRAME:t=h;break;case r.AJAX:t=i&&_||!1;break;case r.FLASH:t=n&&E||!1;break;default:return p.log(x+"type\u53c2\u6570\u4e0d\u5408\u6cd5"),!1}return t&&p.log(x+"\u4f7f\u7528"+e+"\u4e0a\u4f20\u65b9\u5f0f"),a.set("type",e),t},_renderButton:function(){var e,t,a=this,r=a.get("type"),i=a.get("target"),n=a.get("multiple"),s=a.get("disabled"),u=a.get("name"),o={name:u,multiple:n,disabled:s,srcFileInput:a.get("fileInput")};return r==A.type.FLASH?(t=y,f.mix(o,{size:a.get("swfSize")})):t=b,e=new t(i,o),e.on("change",a._select,a),e.render(),a.set("button",e),r==A.type.IFRAME&&l.ie<10&&a.set("multiple",!1),e},_renderQueue:function(){var e=this,t=new F;return t.set("uploader",e),t.on("add",function(t){e.fire(A.event.ADD,t)}),t.on("remove",function(t){e.fire(A.event.REMOVE,t)}),e.set("queue",t),t},_select:function(e){var t=this,a=t.get("queue"),r=t.get("curUploadIndex"),i=e.files;return f.each(i,function(t){t.size||(t.size=0),t.name||(t.name=t.fileName||I),t.input=e.input||t}),i=t._processExceedMultiple(i),t.fire(A.event.SELECT,{files:i}),t.get("isAllowUpload")?void a.add(i,function(){r==I&&t.get("autoUpload")&&t.uploadFiles()}):!1},_processExceedMultiple:function(e){var t=this,a=t.get("multipleLen");return 0>a||!f.isArray(e)||!e.length?e:f.filter(e,function(e,t){return a>t})},_uploadCompleteHandler:function(e){var t,a=this,r=e.result,i=A.event,n=a.get("queue"),s=a.get("curUploadIndex");if(!f.isObject(r))return!1;if(n.updateFile(s,{result:r}),t=Number(r.status),1===t)n.fileStatus(s,A.status.SUCCESS),a._success(r.data),a.fire(i.SUCCESS,{index:s,file:n.getFile(s),result:r});else{var u=r.msg||r.message||I;r.msg=u,n.fileStatus(s,A.status.ERROR,{msg:u,result:r}),a.fire(i.ERROR,{msg:u,status:t,result:r,index:s,file:n.getFile(s)})}a.set("curUploadIndex",I),a.fire(i.COMPLETE,{index:s,file:n.getFile(s),result:r}),a._continueUpload()},_uploadStopHanlder:function(){var e=this,t=e.get("queue"),a=e.get("curUploadIndex");t.fileStatus(a,A.status.CANCEL),e.set("curUploadIndex",I),e.fire(A.event.CANCEL,{index:a})},_continueUpload:function(){var e=this,t=e.get("uploadFilesStatus");t!=I&&e._uploaderStatusFile(t)},_uploadProgressHandler:function(e){var t=this,a=t.get("queue"),r=t.get("curUploadIndex"),i=a.getFile(r);f.mix(e,{file:i}),a.fileStatus(r,A.status.PROGRESS,e),t.fire(A.event.PROGRESS,e)},_success:function(e){if(!f.isObject(e))return!1;var t=this,a=e.url,r=t.get("curUploadIndex"),i=t.get("queue");return f.isString(a)?void i.updateFile(r,{sUrl:a}):!1},theme:function(e){var t=this,a=t.get("theme");return e?a?(p.log("\u4e0d\u652f\u6301\u91cd\u65b0\u6e32\u67d3\u4e3b\u9898\uff01"),t):(e.set("uploader",t),e.set("queue",t.get("queue")),e.render&&e.render(),t.fire("themeRender",{theme:a,uploader:t}),t.set("theme",e),t):!1},restore:function(e){var t,a=this;if(a.set("hasRestore",!0),e){var r=T(e);if(!r.length)return p.log("restore()\uff1a\u4e0d\u5b58\u5728target\uff01"),!1;t=r.text()}else{var n=a.get("theme");if(!n)return!1;var s=n.get("queueTarget");if(!s||!s.length)return!1;var u=s.all("script");u.each(function(e){T(e).attr("type")==C&&(t=T(e).html())})}if(t=i.parse(t),!t.length)return!1;var l,o=a.get("queue");f.each(t,function(e){e.status=1,l={type:"restore",name:e.name||"",url:e.url||"",result:e};var t=o.add(l),r=t.id,i=o.getFileIndex(r);o.fileStatus(i,"success",{index:i,id:r,file:t}),a.fire("success",{file:t,result:t.result})})}},{ATTRS:{target:{value:I,getter:function(e){return T(e)}},text:{value:"\u4e0a\u4f20\u6587\u4ef6"},fileInput:{value:I},theme:{value:I},btnTpl:{value:"<a href='javascript:void(0)' class='g-u ks-uploader-button'><span class='btn-text'>{text}</span></a>"},button:{value:{}},queue:{value:{}},type:{value:"auto"},multiple:{value:!1,setter:function(e){var t=this,a=t.get("button");return!f.isEmptyObject(a)&&f.isBoolean(e)&&a.set("multiple",e),e}},multipleLen:{value:-1},disabled:{value:!1,setter:function(e){var t=this,a=t.get("button");return!f.isEmptyObject(a)&&f.isBoolean(e)&&a.set("disabled",e),e}},action:{value:I,setter:function(e){var t=this,a=t.get("uploadType");return a&&!f.isEmptyObject(a)&&a.set("action",e),e}},data:{value:{},setter:function(e){if(f.isObject(e)){var t=this,a=t.get("uploadType");a&&!f.isEmptyObject(a)&&a.set("data",e)}return e}},isAllowUpload:{value:!0},autoUpload:{value:!0},filter:{value:I,setter:function(e){var t=this,a=t.get("uploadType");return a&&!f.isEmptyObject(a)&&a.set("filter",e),e}},hasRestore:{value:!1},curUploadIndex:{value:I},curFile:{value:I,getter:function(){var e=this,t=I,a=e.get("curUploadIndex");if(f.isNumber(a)){var r=e.get("queue");t=r.getFile(a)}return t}},uploadType:{value:{}},uploadFilesStatus:{value:I},swfSize:{value:{}},CORS:{value:!1},timeout:{value:600,setter:function(e){var t=this,a=t.get("uploadType");return a&&!f.isEmptyObject(a)&&a.set("timeout",e),e}}}},"Uploader");return f.mix(A,{type:{AUTO:"auto",IFRAME:"iframe",AJAX:"ajax",FLASH:"flash"},event:{SELECT:"select",ADD:"add",START:"start",PROGRESS:"progress",COMPLETE:"complete",SUCCESS:"success",UPLOAD_FILES:"uploadFiles",CANCEL:"cancel",ERROR:"error",REMOVE:"remove",RESTORE:"restore"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error"}}),e=A}(),a.exports=p});define("kg/uploader/6.2.13/plugins/auth/auth",["node","base","util"],function(e,t,r){function i(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}var a=e("node"),s=e("base"),l=e("util"),n="",o=a.all,u="error",g=s.extend({pluginInitializer:function(e){if(!e)return!1;var t=this;t.set("uploader",e),t._useThemeConfig();var r=e.get("queue");t._setSwfButtonExt(),r.on("add",function(e){var r=e.file;if("restore"===r.type)return!0;var i=t.testAllowExt(r);i&&(i=t.testMaxSize(r)),i&&t.testRepeat(r),i&&t.testWidthHeight(r)}),r.on("remove",function(e){var r=e.file,i=r.status;"success"===i&&t.testMax()&&t.testRequired()}),e.on("success",function(){t.testMax()}),e.on("error",function(r){-1===r.status&&"max"===r.rule&&t._maxStopUpload(),e.set("isAllowUpload",!0)})},_useThemeConfig:function(){var e=this,t=e.get("msg");if(!l.isEmptyObject(t))return!1;var r=e.get("uploader"),i=r.get("theme");if(!i)return!1;var t=i.get("authMsg");t&&e.set("msg",t);var a=e.get("allowExts");return a||e.set("allowExts",i.get("allowExts")),e},setAllowExts:function(e){if(!l.isString(e))return!1;var t=[],r=[];return e=e.split(","),l.each(e,function(e){t.push("*."+e),r.push(e.toUpperCase())}),t=t.join(";"),r=r.join(","),{desc:r,ext:t}},testAll:function(){var e=this;return e.testRequire()&&e.testMax()},isUploaderType:function(e){var t=this,r=t.get("uploader"),i=r.get("type");return e===i},testRequired:function(){var e=this,t=e.get("uploader"),r=t.get("queue"),i=r.getFiles("success");return i.length>0},testAllowExt:function(e){function t(e,t){var r,i=!1,a=t.toLowerCase();return l.each(e,function(e){return r=new RegExp("^.+."+e+"$"),r.test(a)?i=!0:void 0}),i}function r(e){var t=e.split(".");return t[t.length-1]}if(!l.isObject(e))return!1;var i=this,a=e.name,s=i.get("allowExts");if(!s)return!0;var n=s.split(","),o=t(n,a);if(!o){var u=r(a),g=i.msg("allowExts");g=l.substitute(g,{ext:u}),i._fireUploaderError("allowExts",[s,g],e)}return o},testMax:function(){var e=this,t=e.get("max");if(t===n)return!0;var r=e.get("uploader"),i=r.get("queue"),a=i.getFiles("success"),s=a.length,o=t>s;if(o)r.set("disabled",!1),r.set("isAllowUpload",!0);else{r.set("disabled",!0),r.set("isAllowUpload",!1);var u=e.msg("max");u=l.substitute(u,{max:t}),e._fireUploaderError("max",[t,u])}return o},testMaxSize:function(e){var t=this,r=e.size,a=t.get("maxSize");if(a===n||!r)return!0;a=1024*a;var s=a>=r;if(!s){var o=t.msg("maxSize");o=l.substitute(o,{maxSize:i(a),size:e.textSize}),t._fireUploaderError("maxSize",[a,o],e)}return s},testRepeat:function(e){if(!l.isObject(e))return!1;var t=this,r=e.name,i=t.get("allowRepeat");if(i===n)return!1;var a=t.get("uploader"),s=a.get("queue"),o=s.getFiles("success"),u=!1;return l.each(o,function(a){return a.name===r?(a.size?a.size===e.size&&t._fireUploaderError("allowRepeat",[i,t.msg("allowRepeat")],e):t._fireUploaderError("allowRepeat",[i,t.msg("allowRepeat")],e),u=!0):void 0}),u},testWidthHeight:function(e){function t(t,s){var l=i.call(r,t,s);if(l){a.set("isAllowUpload",!0);var n=a.get("queue").getFileIndex(e.id);a.upload(n)}else{var o=r.msg("widthHeight");r._fireUploaderError("widthHeight",[i,o],e)}}var r=this,i=r.get("widthHeight");if(i===n)return!0;var a=r.get("uploader");a.set("isAllowUpload",!1);var s=e.data;if(l.isEmptyObject(s)){var u=a.get("target").all("input").getDOMNode();u.select(),u.blur();var g=document.selection.createRange().text,f=o('<img style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);width:300px;visibility:hidden;"  />').appendTo("body").getDOMNode();f.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=g;var d=f.offsetWidth,p=f.offsetHeight;t(d,p),o(f).remove()}else{var c=new FileReader;c.onload=function(e){var r=e.target.result,i=new Image;i.onload=function(){var e=i.width,r=i.height;t(e,r)},i.src=r},c.readAsDataURL(s)}},_setSwfButtonExt:function(){var e=this,t=e.get("uploader"),r=e.get("allowExts"),i=t.get("button"),a=e.isUploaderType("flash");return a&&r!==n?(r=e.setAllowExts(r),i&&i.set("fileFilters",r[0]),e):!1},_getExts:function(e){if(!l.isString(e))return!1;var t=e.split(";"),r=[],i=/^\*\./;return l.each(t,function(e){e=e.replace(i,""),r.push(e.toUpperCase())}),l.each(r,function(e){t.push(e)}),t},_fireUploaderError:function(e,t,r){var i=this,a=i.get("uploader"),s=a.get("queue"),n={status:-1,rule:e},o=-1;r&&(o=s.getFileIndex(r.id),l.mix(n,{file:r,index:o})),t&&l.mix(n,{msg:t[1],value:t[0],result:{}}),s.fileStatus(o,"error",n),i.fire(u,n),a.fire("error",n)},_maxStopUpload:function(){var e=this,t=e.get("uploader"),r=t.get("queue"),i=e.get("max"),a=t.get("curUploadIndex");if(a===n||i>a)return!1;var s=r.get("files"),o=r.getFiles("success");o.length>i&&t.stop(),l.each(s,function(e,t){t>=a&&r.remove(e.id)}),t.set("curUploadIndex",n)},msg:function(e,t){var r=this;if(!l.isString(e))return r;var i=r.get("msg");return l.isString(t)?(i[e]=t,t):i[e]},_processRuleConfig:function(e,t){var r=this;return l.isString(e)?(l.isArray(t)&&r.msg(e,t[1]),r):r}},{ATTRS:{pluginId:{value:"auth"},uploader:{value:n},required:{value:n},max:{value:n},allowExts:{value:n},maxSize:{value:n},allowRepeat:{value:n},widthHeight:{value:n},msg:{value:{}}}});r.exports=g});define("kg/uploader/6.2.13/plugins/filedrop/filedrop",["node","base","kg/uploader/6.2.13/logger.js","util","ua"],function(e,t,r){var o=e("node"),i=e("base"),a=e("kg/uploader/6.2.13/logger.js"),n=e("util"),p=e("ua"),s="",l=function(){return p.webkit>=7||p.firefox>=3.6?"supportDrop":p.ie?"notSupportDropIe":p.webkit<7||p.firefox<3.6?"notSupportDrop":void 0},u=i.extend({pluginInitializer:function(e){var t=this;t.set("mode",l());var r,o=t.get("mode");if(!e)return!1;if(t.set("uploader",e),"flash"===e.get("type"))return a.log("flash\u4e0a\u4f20\u65b9\u5f0f\u4e0d\u652f\u6301\u62d6\u62fd\uff01"),t.set("isSupport",!1),!1;if("supportDrop"!==o)return a.log("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u62d6\u62fd\u4e0a\u4f20\uff01"),t.set("isSupport",!1),!1;var i=e.get("target");t.set("target",i),r=t._createDropArea(),r.on("click",t._clickHandler,t),e.on("afterDisabledChange",function(e){t[e.newVal&&"hide"||"show"]()}),t.fire("render",{buttonTarget:t.get("buttonWrap")})},show:function(){var e=this,t=e.get("dropContainer");t.show()},hide:function(){var e=this,t=e.get("dropContainer");t.hide()},_createDropArea:function(){var e=this,t=o(e.get("target")),r=e.get("mode"),i=n.substitute(e.get("tpl")[r],{name:e.get("name")}),a=o(i),p=a.all(".J_ButtonWrap");return a.appendTo(t),a.on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),a.on("drop",function(t){t.stopPropagation(),t.preventDefault(),e._dropHandler(t)}),e.set("dropContainer",a),e.set("buttonWrap",p),e._setStyle(),a},_setStyle:function(){var e=this,t=e.get("dropContainer");return t.length?(t.parent().css("position","relative"),void t.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1000"})):!1},_clickHandler:function(){var e=this,t=e.get("uploader"),r=t.get("button"),o=r.get("fileInput");o.fire("click")},_dropHandler:function(e){var t=this,r=e.originalEvent.dataTransfer.files,o=[],i=t.get("uploader");return r.length&&i!==s?(n.each(r,function(e){n.isObject(e)&&o.push({name:e.name,type:e.type,size:e.size,data:e})}),t.fire("afterdrop",{files:o}),void i._select({files:o})):!1}},{ATTRS:{pluginId:{value:"filedrop"},target:{value:s,getter:function(e){return o(e)}},uploader:{value:s},dropContainer:{value:s},isSupport:{value:!0},tpl:{value:{supportDrop:'<div class="drop-wrapper"></div>',notSupportDropIe:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u4f7f\u7528chrome\u6d4f\u89c8\u5668\u6216firefox\u6d4f\u89c8\u5668</p></div>',notSupportDrop:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u5347\u7ea7\u60a8\u7684\u6d4f\u89c8\u5668</p></div>'}},name:{value:""}}});r.exports=u});define("kg/search-suggest/6.3.1/mods/stat",["cookie","base","util","event","kg/search-suggest/6.3.1/mods/local-query"],function(e,t,s){function i(e){i.superclass.constructor.call(this,e||{})}e("cookie");var a=e("base"),n=e("util"),l=e("event"),r=e("kg/search-suggest/6.3.1/mods/local-query");n.extend(i,a,{pluginInitializer:function(e){var t=this,s=t.get("stat");t.set("caller",e),e.on("beforeSubmit",function(e){var s=e.isInitSearch;t.setStat(s)}),s&&(t.sendTongji(),t.bindSearchTrace())},bindSearchTrace:function(){var e=this;l.delegate("body","click","a",e.initSearchTrace,e)},initSearchTrace:function(e){var t=this,s=e.currentTarget,i=s.getAttribute("trace"),a=s.getAttribute("href");if(i)switch(i){case"relatedSearch":t.saveQuery();break;case"auction":var n=t.stat;n&&a.indexOf("initiative_new")===-1&&s.setAttribute("href",a+"&initiative_new=1")}},sendTongji:function(){var e,t=this,s=t.getStatInst();s.checkFlash({onSuccess:function(){e=s.query("stat")[0],e&&e.value&&(t.stat=e.value,t.send("f_stats_show="+e.value,!0))}})},setStat:function(e,t){var s=this,i=s.get("caller"),a=i.query,n=s.saveQuery(a,e);n&&s.send("lf_aclog=null-null-null-null-0&stats_click="+n,t)},getStatInst:function(){var e=this,t=e.get("caller"),s=t.get("sugConfig"),i=s.tab||"",a=new r({name:"stat",tab:i});return a},saveQuery:function(e,t){var s,i,a=this.getStatInst();return t&&e?(s=encodeURIComponent(e),i="initiative_new:1;q:"+s,a.save("stat",i)):a.deleteItem("stat"),i},send:function(e,t){var s,i,a=this.get("logTypes");t?(a=this.get("tongjiKey"),s=a.logkey,i=a.chksum):(a=this.get("pvKey"),s=a.logkey,i=a.chksum),window.goldlog?goldlog.record(s,"",e,i):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[s,"",e,i]})},renderPlugin:function(){}},{ATTRS:{pluginId:{value:"stat"},tongjiKey:{value:{logkey:"/tongji",chksum:"H51884970"}},pvKey:{value:{logkey:"/search",chksum:"H51884969"}}}}),s.exports=i});define("kg/uploader/6.2.13/theme",["node","base","util"],function(e,t,r){var n,a,i=e("node"),u=e("base"),s=e("util");n=function(e){return e=KISSY||{log:function(){},error:function(){}}}(),a=function(e){var t=i,r=u,a="",l=t.all,o={BUTTON:"-button",QUEUE:"-queue"},d="text/uploader-theme",c=s,f=n,g=r.extend({render:function(){var e=this,t=e.get("uploader");t.set("theme",e),e._addThemeCssName(),e._tplFormHtml(),e._bind()},_selectHandler:function(){},_addHandler:function(){},_removeHandler:function(){},_waitingHandler:function(){},_startHandler:function(){},_progressHandler:function(){},_successHandler:function(){},_errorHandler:function(){},_restore:function(){var e=this,t=e.get("uploader"),r=t.getPlugin("urlsInput");if(!r)return!1;var n=r.get("autoRestore");if(!n)return!1;var a=t.get("queue"),i=a.get("files");return i.length?(c.each(i,function(r,n){r.status="success",t.fire("add",{file:r,index:n}),e._renderHandler("_successHandler",{file:r,result:r.result}),e._hideStatusDiv(r)}),e):!1},_addThemeCssName:function(){var e=this,t=e.get("name"),r=e.get("queueTarget"),n=e.get("uploader"),i=n.get("target");return r.length?t==a?!1:(r.length&&r.addClass("ks-uploader-queue "+t+o.QUEUE),i.addClass(t+o.BUTTON),e):(f.log("\u4e0d\u5b58\u5728\u5bb9\u5668\u76ee\u6807\uff01"),!1)},_bind:function(){var e=this,t=e.get("uploader"),r=["add","remove","select","start","progress","success","error","complete"];t.on(r[0],function(r){var n=e._appendFileDom(r.file),a=t.get("queue");a.updateFile(r.index,{target:n})}),t.on(r[1],function(t){e._removeFileDom(t.file)}),c.each(r,function(r){t.on(r,function(t){var r="_"+t.type+"Handler";e._renderHandler(r,t)})})},_renderHandler:function(e,t){var r=this,n=r[e];r._setStatusVisibility(t.file),n&&n.call(r,t)},_setStatusVisibility:function(e){var t=this;if(!c.isObject(e)||c.isEmptyObject(e))return t;t._hideStatusDiv(e);var r=e.status,n=e.target;if(!n.length)return!1;var a=n.all("."+r+"-status");a.length&&a.show();var i=["waiting","start","uploading","progress","error","success"];return c.each(i,function(e){n.removeClass(e)}),n.addClass(r),t},_hideStatusDiv:function(e){if(!c.isObject(e))return!1;var t=e.target;t&&t.length&&t.all(".status").hide()},_appendFileDom:function(e){var t,r=this,n=r.get("fileTpl"),a=l(r.get("queueTarget"));return a.length?(t=c.substitute(n,e),l(t).hide().appendTo(a).fadeIn(.4).data("data-file",e)):!1},_removeFileDom:function(e){if(!c.isObject(e))return!1;var t=e.target;return t&&t.length?void t.fadeOut(.4,function(){t.remove()}):!1},_tplFormHtml:function(){var e=this,t=e.get("fileTpl"),r=l(e.get("queueTarget"));if(!r.length)return!1;var n=r.all("script");return n.each(function(r){l(r).attr("type")==d&&(t=l(r).html(),e.set("fileTpl",t))}),t}},{ATTRS:{name:{value:a},use:{value:a},fileTpl:{value:a},authMsg:{value:{}},queueTarget:{value:a,getter:function(e){return l(e)}},queue:{value:a},uploader:{value:a}}});return e=g}(),r.exports=a});