define("kg/home-2017/1.4.26/common/inject",["kg/pattern/2.1.3/index","kg/home-2017/1.4.26/common/head/index","util"],function(e,o,n){var i=e("kg/pattern/2.1.3/index"),m=e("kg/home-2017/1.4.26/common/head/index"),t=e("util");t.mix(i.prototype,m)});define("kg/home-2017/1.4.26/c/shop/index",["kg/pattern/2.1.3/index","util","url","node","kg/home-2017/1.4.26/c/shop/item.jst.html"],function(t,e,r){function o(t,e){this.el=t,this.conf=e,o.superclass.constructor.apply(this)}var n=t("kg/pattern/2.1.3/index"),i=t("util"),a=t("url"),s=t("node"),u=s.all,c="shop",h="cache-"+c,p=t("kg/home-2017/1.4.26/c/shop/item.jst.html"),l=window.lib.mtop;n.extend(o,{init:function(){var t=this;this.pageSize=4,this.fetch().then(function(e){var r=t.conf,o=t.link;i.each(e,function(e){if(o){var r=t.getArgsStr(e.url),n=o.indexOf("?")>-1?"&":"?";e.url=o+n+"categoryId="+e.categoryId+"&shopId="+e.shopId,r&&(e.url+="&"+r)}});var n=u(".list",t.el);t.render(p,{list:e,moduleinfo:r.moduleinfo},n)})["catch"](function(e){t.reportError({extra:e&&e.message})})},fetch:function(){var t=this;return l.request({api:"mtop.mytaobao.pchome.multiAcquire",v:"1.0",data:{bizType:"goodshop"},ecode:0,type:"GET",dataType:"jsonp",timeout:2e4}).then(function(e){t.el.empty(),t.renderHead();var r=e.data.result;return r&&r.length>=t.pageSize?(t.offline.setItem(h,JSON.stringify(r)),r):t.getCache()},function(e){return t.el.empty(),t.renderHead(),t.getCache()})},getCache:function(){var t=this.offline.getItem(h);return t?(this.reportCache(),JSON.parse(t)):this.backup()},backup:function(){var t=this;return this.use("p/tbh-"+this.name+"/index",function(e){return t.reportCDN(),e},function(e){t.reportError()})},getArgsStr:function(t){var e=[];try{var r=a.parse(t,!0);return r.query.algArgs&&e.push("algArgs="+r.query.algArgs),r.query.rpos&&e.push("rpos="+r.query.rpos),e.join("&")}catch(o){}},defaults:function(){return{name:"shop",category:"ERR_Shop_DATA_NULl",title:"\u6bcf\u65e5\u597d\u5e97",subtitle:"\u53d1\u73b0\u6df1\u85cf\u7684\u597d\u5e97",logo:"//img.alicdn.com/tfs/TB1_EXwb3oQMeJjy0FpXXcTxpXa-162-48.png",link:"//www.taobao.com/markets/tbhome/cool-shop"}}}),r.exports=o});define("kg/home-2017/1.4.26/c/sale/index",["node","kg/pattern/2.1.3/lib/reporter"],function(e,a,r){function t(e){this.el=e;var a=n("#J_SaleBd",this.el);if(!a.length)return void o({category:"ERROR_Sale_Hook_NotFound",msg:"\u6a21\u5757 Sale \u6e32\u67d3\u94a9\u5b50\u6ca1\u627e\u5230\uff0c\u670d\u52a1\u5668\u6e32\u67d3\u51fa\u4e86\u95ee\u9898"});var r=a.attr("data-use");KISSY.use(r,function(e,a){a?(new a,n(".sale-wrapper").removeClass("loading")):o({category:"ERROR_Sale_Crash",msg:"Sale \u6a21\u5757\u52a0\u8f7d\u521d\u59cb\u5316\u811a\u672c\u5931\u8d25"})})}var l=e("node"),o=e("kg/pattern/2.1.3/lib/reporter"),n=l.all;r.exports=t});define("kg/home-2017/1.4.26/c/live/index",["kg/pattern/2.1.3/index","node","util","kg/home-2017/1.4.26/c/live/item.jst.html"],function(e,t,i){function n(e,t){this.conf=t,this.el=e,n.superclass.constructor.apply(this)}var r=e("kg/pattern/2.1.3/index"),a=e("node"),o=e("util"),c=a.all,s=e("kg/home-2017/1.4.26/c/live/item.jst.html"),l=window.lib.mtop;r.extend(n,{init:function(){var e=this;this.load({len:4,validator:function(t){var i=[],n=[];return o.each(t,function(t){var r=t.item.data;"video"===t.item.type&&(e.validator.array.minItems(r.itemList,2)?i.push(t):n.push(r.id))}),i.length>=4?{valid:!0,list:i}:e.validatorError(t,i,n)},normal:!0}).then(function(t){var i=c(".list",e.el);e.render(s,{list:t},i)})["catch"](function(t){e.reportError("render"+t&&t.message)})},load:function(e){var t=this,i=e.len,n=e.validator,r=e.normal;return l.request({api:"mtop.mytaobao.pchome.multiAcquire",v:"1.0",data:{bizType:"live"},ecode:0,type:"GET",dataType:"jsonp",timeout:2e4}).then(function(e){t._renderHead(r);var a=e.data&&e.data.result,c=void 0;if(a&&a.length>=i){if(o.isFunction(n)){var s=n(a);return s.valid?(t.offline.setItem(t.cacheName,JSON.stringify(a)),a):t.getCache(s.message)}return t.offline.setItem(t.cacheName,JSON.stringify(a)),a}return c=a?"code: 201, desc"+i+":"+a.length:"code:102",t.getCache(c)},function(e){return t._renderHead(r),t.getCache(e&&e.message)})},getCache:function(e){var t=this.offline.getItem(this.cacheName);return t?(this.reportCache(e),t=JSON.parse(t)):this.backup(e)},backup:function(e){var t=this,i=this.name||this.backupName;return this.use("p/tbh-"+i+"/index",function(i){return t.reportCDN(e),i},function(e){t.reportError("cdn"+e&&e.message)})},validatorError:function(e,t,i){var n=i.length?", badcase: "+i.join(","):"";return{valid:!1,message:"code: 202, desc: "+e.length+":"+t.length+n}},_renderHead:function(e,t){this.el.empty(),e?this.renderHead(t):this.renderHeadBar(t)},defaults:function(){return{name:"live",cacheName:"TB_Live",cdnKey:"p/tbh-live/index",category:"ERROR_LIVE_Data_err",title:"\u6dd8\u5b9d\u76f4\u64ad",subtitle:"\u4f60\u7684\u7231\u8c46\u76f4\u64ad\u7b49\u4f60\u54df\uff01",logo:"//img.alicdn.com/tfs/TB1cmpCb3MPMeJjy1XdXXasrXXa-204-42.png",noEXP:!0}}}),i.exports=n});define("kg/home-2017/1.4.26/c/hotsale/index",["kg/pattern/2.1.3/index","kg/datalazyload/6.0.10/index","node","util","kg/home-2017/1.4.26/c/hotsale/item.jst.html","kg/home-2017/1.4.26/c/hotsale/config.js"],function(t,e,i){function n(t){this.el=t,this.conf=l;var e=this.conf.moduleinfo.on;s.isTrue(e)&&n.superclass.constructor.apply(this)}var o=t("kg/pattern/2.1.3/index"),a=t("kg/datalazyload/6.0.10/index"),h=t("node").all,s=t("util"),r=t("kg/home-2017/1.4.26/c/hotsale/item.jst.html"),l=t("kg/home-2017/1.4.26/c/hotsale/config.js");o.extend(n,{init:function(){var t=this;h(".hotsale-loading",this.el).remove(),this.renderHeadBar(),this.load().then(s.bind(function(t){var e=t.length;e-=h(".s1190").length?e%4:e%5,t=t.slice(0,e);var i=h(".list",this.el);this.render(r,t,i),h(".hotsale-end",this.el).show(),new a(".tbh-hotsale",{autoDestroy:!0}),this._bind(),this._addTags()},this))["catch"](function(e){t.reportError()})},_bind:function(){var t=this,e=h(window);e.on("resize",function(){var i=h("ul",t.el),n=h("li",i),o=n.length;if(e.width()<1190){if(n.show(),o%4==0)return;n.slice(o%4*-1).hide()}else{if(n.show(),o%5==0)return;n.slice(o%5*-1).hide()}})},load:function(){var t={appid:2493},e=this.conf.moduleinfo.size;return e&&(t.size=e),this.jsonp({url:this.getHost(),data:t,timeout:5}).then(s.bind(function(t){return t&&this.validator.array.minItems(t.result,20)?(t=t.result.slice(0,200),this.offline.setItem(this.cacheKey,JSON.stringify(t)),t):this.getCache()},this),s.bind(function(){return this.getCache()},this))},getCache:function(){var t=this.offline.getItem(this.cacheKey);return t?(this.reportCache(),JSON.parse(t)):this.backup()},backup:function(){return this.use(this.cdnKey,!0).then(s.bind(function(t){return this.reportCDN(),t},this))},_addTags:function(){s.each(this.conf.map,function(t){t.tag&&t.img&&t.width&&t.height&&h("."+t.tag,self.el).css({backgroundImage:"url("+t.img+")",width:t.width,height:t.height,left:t.left,top:t.top})})},getHost:function(){return location.host.indexOf("tb.alibaba-inc.com")!==-1?"//tuipre.taobao.com/recommend":"//tui.taobao.com/recommend"},defaults:function(){return{name:"hotsale",cacheKey:"tbh-hotsale",cdnKey:"p/tbh-hotsale/index",category:"Err_HotSale_load_data_Crash",title:"\u731c\u4f60\u559c\u6b22"}}}),i.exports=n});define("kg/home-2017/1.4.26/c/helper/index",["node","kg/home-2017/1.4.26/c/helper/item.jst.html","kg/pattern/2.1.3/index"],function(e,t,i){function n(){this.loadData.apply(this,arguments)}var r=e("node"),h=e("kg/home-2017/1.4.26/c/helper/item.jst.html"),l=e("kg/pattern/2.1.3/index"),a=r.all,o="cache-helper-tce";l.extend(n,{loadData:function(e){if(this.el=e,window.staticConfig.helper){var t=window.staticConfig.helper;if(t&&t.length>0)this.offline.setItem(o,JSON.stringify(t)),this._render(t);else{var i=this.offline.getItem(o);i&&this._render(JSON.parse(i))}}},_render:function(e){var t=a(".helper",this.el);this.render(h,e,t)},defaults:function(){return{name:"helper"}}}),i.exports=n});define("kg/home-2017/1.4.26/c/goods/index",["kg/pattern/2.1.3/index","util","node","kg/home-2017/1.4.26/c/goods/item.jst.html"],function(e,t,i){function r(e,t){this.el=e,this.conf=t,r.superclass.constructor.apply(this)}var s=e("kg/pattern/2.1.3/index"),n=e("util"),o=e("node"),a=o.all,l=e("kg/home-2017/1.4.26/c/goods/item.jst.html"),h=window.lib.mtop,a=o.all,d=!1,c=!1,u="cache-moduleName";s.extend(r,{init:function(){this.goodEl=a(".list",this.el),this.permalink=this.goodEl.attr("data-permalink"),this.closeHd="1"===this.goodEl.attr("data-hd"),this.load()},_bind:function(){var e=this;this.refreshEl.on("click",function(t){t.halt(),c||(c=!0,e.refreshEl.addClass("disable"),e.load())})},load:function(){var e=this;return this.conf?h.request({api:"mtop.mytaobao.pchome.multiAcquire",v:"1.0",data:{bizType:"gooditem"},ecode:0,type:"GET",dataType:"jsonp",timeout:2e4}).then(function(t){e.requestTime||(e.el.empty(),e.renderHead());var i=t.data;return i&&i.result&&i.result.length>=e.pageSize?(e.requestTime++,e.offline.setItem(u,JSON.stringify(i.result)),e._render(i.result),void 0):e.getCache()},function(t){return e.requestTime||(e.el.empty(),e.renderHead()),e.getCache()})["catch"](function(t){e.reportError({extra:t&&t.mesage})}):(this.el.empty(),this.renderHead(),void this._backup())},getCache:function(){var e=this.offline.getItem(u);e?(this.reportCache(),e=JSON.parse(e),this._render(e)):this._backup()},_backup:function(){var e=this;this.use("p/tbh-goods/index").then(function(t){e._render(t),e.reportCDN()},function(t){e.reportError({extra:t&&t.message})})},_render:function(e){var t=this;n.each(e,function(e){if(t.permalink){var i=t.permalink.indexOf("?")>-1?"&":"?";e.url=t.permalink+i+"contentId="+e.contentId}});var i=a(".goods-list",this.el);if(this.render(l,{result:e,closeHd:this.closeHd},i),c=!1,!d){if(d=!0,this.refreshEl=a(".switch",this.el),0===this.refreshEl.length)return;this._bind()}this.refreshEl.removeClass("disable")},defaults:function(){return{requestTime:0,pageSize:6,category:"WARN_Goods_Data_err",name:"goods",title:"\u6709\u597d\u8d27",subtitle:"\u4e0e\u54c1\u8d28\u751f\u6d3b\u4e0d\u671f\u800c\u9047",switcher:!1,logo:"//img.alicdn.com/tfs/TB1tqpnegMPMeJjy1XcXXXpppXa-148-48.png"}}}),i.exports=r});define("kg/home-2017/1.4.26/c/qiang/index",["kg/pattern/2.1.3/index","kg/home-2017/1.4.26/c/qiang/item.jst.html","node","kg/home-2017/1.4.26/common/pipe/index","util","cookie"],function(t,e,n){function i(t,e){this.el=o(t),this.conf=e,i.superclass.constructor.apply(this)}var s=t("kg/pattern/2.1.3/index"),a=t("kg/home-2017/1.4.26/c/qiang/item.jst.html"),o=t("node").all,r=(t("kg/home-2017/1.4.26/common/pipe/index"),t("util")),c=t("cookie");s.extend(i,{init:function(){this.load()},load:function(){var t=this;return this.xctrl({data:JSON.stringify(this.conf),key:["list","modules"],request:"taobao",extra:{cna:c.get("cna"),request:this.request++}}).then(function(e){var n=void 0,i=void 0,s=e&&e.list&&e.list[0]&&e.list[0].item;if(s&&r.each(s,function(e,a){"current"===e.status&&t.validator.array.minItems(e.itemList,3)&&(n=e.itemList,i=s[a+1])}),t.el.html(""),n){n.length>=6&&(t.switcher=!0),t.renderHead(e.modules),t.noEXP=!0,o(".switch",t.el).on("click",r.bind(t.loadMore,t));var c=o(".list",t.el);t.render(a,{list:n},c),i&&i.startDate&&t.start(i.startDate),t.items=n,t.count=1}else t.hide(),t.reportError("data empty")})["catch"](function(e){t.reportError("render"+e&&e.message),t.hide()})},loadMore:function(){var t=this.items.slice(3*this.count,3*(this.count+1));3===t.length&&(this.count++,this.render(a,{list:t},o(".list",this.el)),this.items.length<3*(this.count+1)&&o(".switch",this.el).addClass("disable"))},hide:function(){this.el.parent(".layer").hide()},start:function(t){var e=r.now();t=parseInt(t),t=new Date(t).getTime();var n=t-e;n<0||this.countdown(n)},countdown:function(t){function e(t){return t<10?"0"+t:""+t}var n=this,i=Math.floor(t/1e3),s=parseInt(i/3600,10)%24,a=parseInt(i/60,10)%60,r=parseInt(i%60,10);s=e(s),a=e(a),r=e(r);var c='\u8ddd\u7ed3\u675f<span class="countdown-wrapper"><span class="hour">'+s+'</span>:<span class="minutes">'+a+'</span>:<span class="seconds">'+r+"</span></span>";o(".subtitle",this.el).html(c),setTimeout(function(){t-=1e3,t<1e3?n.load():n.countdown(t)},1e3)},defaults:function(){return{name:"qiang",title:"\u6dd8\u62a2\u8d2d",subtitle:"",logo:"//img.alicdn.com/tfs/TB1UfJnb3oQMeJjy0FpXXcTxpXa-160-44.png",cacheName:"TB_Qiang",switcher:!0,count:0,request:0}}}),n.exports=i});define("kg/home-2017/1.4.26/c/fashion/index",["kg/pattern/2.1.3/index","kg/home-2017/1.4.26/c/fashion/item.jst.html","node","kg/home-2017/1.4.26/common/pipe/index","util"],function(e,t,i){function n(e,t){this.el=o(e),this.conf=t,n.superclass.constructor.apply(this)}var r=e("kg/pattern/2.1.3/index"),a=e("kg/home-2017/1.4.26/c/fashion/item.jst.html"),o=e("node").all,s=(e("kg/home-2017/1.4.26/common/pipe/index"),e("util"));r.extend(n,{init:function(){var e=this;this.load({len:4,validator:function(t){var i=[];return s.each(t,function(t){e.validator.notEmpty(t,["name","subtitle","link","src"])&&i.push(t)}),i.length>=3?{valid:!0,list:i}:e.validatorError(t,i)}}).then(function(t){var i=o(".list",e.el);e.render(a,{list:t},i),e.el.removeClass("tb-loading")})["catch"](function(t){e.reportError("render"+t&&t.message)})},load:function(e){var t=e.len,i=e.validator,n=e.normal;if(window.staticConfig.fashion){var r=window.staticConfig.fashion;this._renderHead(n);var a=r&&r.modules,o=void 0;if(a&&a.length>=t){if(s.isFunction(i)){var h=i(a);return h.valid?(this.offline.setItem(this.cacheName,JSON.stringify(a)),Promise.resolve(a)):this.getCache(h.message)}return this.offline.setItem(this.cacheName,JSON.stringify(a)),Promise.resolve(a)}return o=a?"code: 201, desc"+t+":"+a.length:"code:102",this.getCache(o)}return this._renderHead(n),this.getCache("\u4e0d\u5b58\u5728\u6295\u653e\u6570\u636e")},getCache:function(e){var t=this.offline.getItem(this.cacheName);return t?(this.reportCache(e),t=JSON.parse(t)):this.backup(e)},backup:function(e){var t=this,i=this.name||this.backupName;return this.use("p/tbh-"+i+"/index",function(i){return t.reportCDN(e),i},function(e){t.reportError("cdn"+e&&e.message)})},validatorError:function(e,t,i){var n=i.length?", badcase: "+i.join(","):"";return{valid:!1,message:"code: 202, desc: "+e.length+":"+t.length+n}},_renderHead:function(e,t){this.el.empty(),e?this.renderHead(t):this.renderHeadBar(t)},defaults:function(){return{name:"fashion",title:"\u7279\u8272\u597d\u7269",itemLayer:!0,cacheName:"TB_Fashion"}}}),i.exports=n});